<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="html-title">FlashLearn | Interactive Flashcards</title>
    <link rel="icon" href="icon.png" type="image/png">
    <style>
        :root {
            --primary-color: #4e54c8;
            --secondary-color: #8f94fb;
            --background-light: #f5f7ff;
            --text-dark: #333;
            --text-light: #f5f5f5;
            --success-color: #4caf50;
            --error-color: #f44336;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --transition-speed: 0.3s;
            --card-bg-front: #ffffff;
            --card-bg-back: var(--secondary-color);
            --card-text-front: var(--text-dark);
            --card-text-back: white;
        }
        .dark-mode {
            --primary-color: #5d65df; --secondary-color: #9b9fff;
            --background-light: #1e2133; --text-dark: #f5f5f5; --text-light: #333;
            --card-shadow: 0 4px 8px rgba(255, 255, 255, 0.1);
            --card-bg-front: #2d2d2d; --card-bg-back: #4d4daa;
            --card-text-front: #f5f5f5; --card-text-back: white;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        body { background-color: var(--background-light); color: var(--text-dark); transition: background-color var(--transition-speed), color var(--transition-speed); min-height: 100vh; display: flex; flex-direction: column; font-size: 16px; }
        header { background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; padding: 1.5rem; text-align: center; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); }
        header h1 { font-size: 2rem; margin-bottom: 0.3rem;}
        header p { font-size: 1rem; opacity: 0.9; }
        .container { width: 90%; max-width: 1200px; margin: 2rem auto; padding: 0 1rem; flex: 1; }
        .settings-bar { display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 1rem; gap: 1rem; flex-wrap: wrap; border-bottom: 1px solid #dee2e6; margin-bottom: 1rem; background-color: var(--card-bg-front); border-radius: 8px; box-shadow: var(--card-shadow); }
        .dark-mode .settings-bar { border-bottom-color: #444; }
        .settings-left, .settings-right { display: flex; gap: 0.8rem; align-items: center; }
        .theme-toggle, .language-toggle, #musicToggleBtn { background: none; border: none; cursor: pointer; font-size: 1.6rem; color: var(--secondary-color); padding: 0.3rem; transition: color 0.2s; }
        .theme-toggle:hover, .language-toggle:hover, #musicToggleBtn:hover { color: var(--primary-color); }
        .language-dropdown { position: relative; display: inline-block; }
        .language-menu { display: none; position: absolute; right: 0; top: 110%; margin-top: 5px; background-color: var(--card-bg-front); color: var(--card-text-front); min-width: 120px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border-radius: 8px; z-index: 100; border: 1px solid #eee; }
        .dark-mode .language-menu { border-color: #444; }
        .language-menu.show { display: block; }
        .language-option { padding: 0.8rem 1rem; cursor: pointer; transition: background-color 0.2s; font-size: 0.95rem; }
        .language-option:hover { background-color: rgba(0, 123, 255, 0.1); }
        .dark-mode .language-option:hover { background-color: rgba(77, 171, 247, 0.15); }
        .music-controls { display: flex; align-items: center; gap: 0.5rem; }
        #volumeSlider { width: 80px; height: 5px; cursor: pointer; appearance: none; background: #ddd; border-radius: 5px; outline: none;}
        #volumeSlider::-webkit-slider-thumb { appearance: none; width: 14px; height: 14px; background: var(--primary-color); border-radius: 50%; cursor: pointer; }
        #volumeSlider::-moz-range-thumb { width: 14px; height: 14px; background: var(--primary-color); border-radius: 50%; cursor: pointer; border: none; }
        .dark-mode #volumeSlider { background: #555; }
        #currentDeckDisplay { text-align: center; margin-bottom: 1.5rem; font-size: 0.95rem; color: var(--secondary-color); }
        #currentDeckDisplay span { font-weight: 600; color: var(--text-dark); }
        .dark-mode #currentDeckDisplay span { color: var(--text-dark); }
        button, .button-style { background-color: var(--primary-color); color: white; border: none; padding: 0.7rem 1.3rem; border-radius: 6px; cursor: pointer; font-size: 0.95rem; transition: background-color 0.2s, transform 0.1s, opacity 0.2s, box-shadow 0.2s; display: inline-flex; align-items: center; gap: 0.5rem; text-align: center; justify-content: center; line-height: 1.4; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        button:hover:not(:disabled), .button-style:hover:not(:disabled) { background-color: #0056b3; box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
        .dark-mode button:hover:not(:disabled), .dark-mode .button-style:hover:not(:disabled) { background-color: #69b7f9; }
        button:active:not(:disabled), .button-style:active:not(:disabled) { transform: scale(0.98); box-shadow: none; }
        button:disabled, .button-style:disabled { opacity: 0.6; cursor: not-allowed; background-color: #adb5bd !important; color: #fff !important; border-color: transparent !important; box-shadow: none; }
        .button-secondary { background-color: var(--primary-color); }
        .button-secondary:hover:not(:disabled) { background-color: #0056b3; }
        .button-outline { background-color: transparent; color: var(--primary-color); border: 1px solid var(--primary-color); box-shadow: none; }
        .button-outline:hover:not(:disabled) { background-color: rgba(0, 123, 255, 0.1); }
        .dark-mode .button-outline { color: var(--primary-color); border-color: var(--primary-color); }
        .dark-mode .button-outline:hover:not(:disabled) { background-color: rgba(77, 171, 247, 0.15); }
        .button-outline:disabled { border-color: #ccc !important; color: #aaa !important; background-color: transparent !important; opacity: 0.5; }
        .study-modes { display: flex; justify-content: center; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .mode-card { background-color: var(--card-bg-front); color: var(--card-text-front); border-radius: 10px; padding: 1.5rem; width: 200px; text-align: center; cursor: pointer; box-shadow: var(--card-shadow); transition: transform 0.3s, border-color 0.3s, opacity 0.3s; border: 2px solid transparent; }
        .mode-card:hover:not(.disabled) { transform: translateY(-5px); border-color: var(--secondary-color); }
        .mode-card.active { border-color: var(--primary-color); transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0, 123, 255, 0.2); }
        .mode-card.disabled { opacity: 0.4; cursor: not-allowed; background-color: #eee; border-color: transparent; transform: none; box-shadow: none; pointer-events: none; }
        .dark-mode .mode-card.disabled { background-color: #333; }
        .mode-icon { font-size: 2.2rem; margin-bottom: 1rem; color: var(--primary-color); }
        .mode-card h3 { font-size: 1.1rem; margin-bottom: 0.4rem; }
        .mode-card p { font-size: 0.9rem; color: #6c757d; }
        .dark-mode .mode-card p { color: #adb5bd; }
        .progress-timer-container { display: flex; justify-content: space-between; align-items: center; max-width: 700px; margin: 0 auto 2rem; gap: 1rem; }
        .progress-container { flex-grow: 1; background-color: #e9ecef; border-radius: 10px; overflow: hidden; height: 12px; }
        .dark-mode .progress-container { background-color: #3a3a3a; }
        .progress-bar { height: 100%; background: linear-gradient(90deg, var(--primary-color), #0056b3); transition: width 0.3s ease; width: 0%; border-radius: 10px; }
        #timerDisplay { font-size: 1rem; color: var(--timer-color); font-weight: 500; min-width: 50px; text-align: right; visibility: hidden; }
        #timerDisplay.visible { visibility: visible; }
        .flashcard-area { perspective: 1000px; min-height: 380px; margin-bottom: 2rem; }
        .flashcard-container { position: relative; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; }
        .flashcard { width: 700px; max-width: 100%; height: 380px; position: relative; cursor: pointer; transform-style: preserve-3d; transition: transform 0.6s; box-shadow: var(--card-shadow); border-radius: 12px; }
        .flashcard.flipped { transform: rotateY(180deg); }
        .flashcard-front, .flashcard-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 2rem 2.5rem; border-radius: 12px; text-align: center; overflow-y: auto; border: 1px solid #eee;}
        .flashcard-front { background-color: var(--card-bg-front); color: var(--card-text-front); }
        .flashcard-back { transform: rotateY(180deg); background-color: var(--card-bg-back); color: var(--card-text-back); }
        .dark-mode .flashcard-front, .dark-mode .flashcard-back { border-color: #333; }
        .flashcard-term-topic { font-size: 1.8rem; margin-bottom: 0.8rem; font-weight: 600; color: var(--primary-color); }
        .flashcard-term-prompt { font-size: 1rem; color: #6c757d; margin-bottom: 1rem; }
        .dark-mode .flashcard-term-prompt { color: #adb5bd; }
        .flashcard-back-section { margin-bottom: 0.8rem; width: 100%; text-align: left; padding-left: 1rem;}
        .flashcard-back-section strong { display: block; margin-bottom: 0.3rem; font-size: 0.95rem; color: var(--primary-color); font-weight: 600;}
        .flashcard-back-content { font-size: 1rem; line-height: 1.6; }
        .flashcard-problem-text { font-size: 1.15rem; line-height: 1.65; text-align: left; width: 100%; margin-top: 0.5rem;}
        .flashcard-problem-answer { font-size: 1.6rem; font-weight: bold; color: var(--success-color); margin-top: 1.5rem; }
        @keyframes cardEntrance { from { opacity: 0; transform: translateY(20px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }
        .card-animation { animation: cardEntrance 0.4s ease-out; }
        .quiz-options { display: none; flex-wrap: wrap; justify-content: center; gap: 1rem; margin-top: 1.5rem; max-width: 700px; margin-left: auto; margin-right: auto;}
        .quiz-option { flex-basis: calc(50% - 1rem); text-align: center; }
        .quiz-option.correct { background-color: var(--success-color); color: white; border-color: var(--success-color); }
        .quiz-option.incorrect { background-color: var(--error-color); color: white; border-color: var(--error-color); }
        .problem-solver { display: none; width: 100%; max-width: 700px; margin: 1.5rem auto; text-align: center; }
        .problem-solver label { display: block; margin-bottom: 0.8rem; font-size: 1rem; font-weight: 500; }
        .problem-solver input[type="number"], .problem-solver input[type="text"] { width: 60%; padding: 0.8rem 1rem; border: 1px solid #ccc; border-radius: 6px; font-size: 1.1rem; text-align: center; background-color: var(--card-bg-front); color: var(--card-text-front); margin: 0 auto 1rem auto; display: block; }
        .dark-mode .problem-solver input { border-color: #555; background-color: #2b2b2b; }
        .problem-solver input:focus { border-color: var(--primary-color); outline: none; box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.15); }
        .submit-answer { width: auto; min-width: 150px; }
        .math-small-wrapper {
          max-width: 100%;
          overflow-x: auto;
          padding-bottom: 0.3em;
        }
        .math-small-wrapper svg {
          transform: scale(0.85);
          transform-origin: left top;
          display: inline-block;
        }
        .math-small-wrapper mjx-container {
          display: inline-block;
        }
        .answer-feedback {
            display: none;
            margin-top: 1.5rem;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            text-align: center;
            font-weight: 500;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            font-size: 1.05rem;
        }
        .answer-feedback.correct {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success-color);
            border: 1px solid rgba(40, 167, 69, 0.3);
        }
        .answer-feedback.incorrect {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--error-color);
            border: 1px solid rgba(220, 53, 69, 0.3);
        }
        .controls { display: flex; justify-content: center; gap: 1rem; margin: 2rem 0; flex-wrap: wrap; }
        .stats-section { background-color: var(--card-bg-front); color: var(--card-text-front); padding: 1.5rem 2rem; border-radius: 12px; margin-top: 2.5rem; box-shadow: var(--card-shadow); border: 1px solid #eee;}
        .dark-mode .stats-section { border-color: #333; }
        .stats-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid #eee; }
        .dark-mode .stats-header { border-bottom-color: #444; }
        .stats-header h2 { font-size: 1.4rem; margin: 0; }
        #resetStatsBtn { font-size: 0.85rem; padding: 0.5rem 1rem; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; }
        .stat-card { background-color: var(--background-light); color: var(--text-dark); padding: 1rem; border-radius: 8px; text-align: center; border: 1px solid #eee;}
        .dark-mode .stat-card { background-color: #252525; border-color: #444; }
        .stat-value { font-size: 1.8rem; font-weight: 600; color: var(--primary-color); margin-bottom: 0.5rem; }
        .stat-label { color: var(--secondary-color); font-size: 0.85rem; text-transform: uppercase; }
        .dark-mode .stat-label { color: #adb5bd; }
        .modal { display: none; position: fixed; z-index: 1050; left: 0; top: 0; width: 100%; height: 100%; overflow-y: auto; background-color: rgba(0, 0, 0, 0.6); backdrop-filter: blur(3px); animation: fadeIn 0.3s ease; align-items: center; justify-content: center; padding: 1rem; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .modal-content { background-color: var(--card-bg-front); color: var(--card-text-front); padding: 2rem; border-radius: 12px; width: 90%; max-width: 700px; max-height: 90vh; overflow-y: auto; position: relative; animation: slideIn 0.3s ease-out; margin: auto; }
        @keyframes slideIn { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid #eee; }
        .dark-mode .modal-header { border-bottom-color: #444;}
        .modal-header h2 { font-size: 1.5rem; margin: 0; }
        .close-modal { background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--secondary-color); padding: 0; line-height: 1; opacity: 0.7; position: absolute; top: 1rem; right: 1.5rem;}
        .close-modal:hover { opacity: 1; color: var(--error-color); }
        .deck-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; list-style: none; padding: 0;}
        .deck-item { background-color: var(--background-light); color: var(--text-dark); padding: 1.2rem; border-radius: 8px; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; position: relative; border: 1px solid #eee; }
        .dark-mode .deck-item { background-color: #252525; border-color: #444; }
        .deck-item:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1); border-color: var(--primary-color); }
        .deck-title { font-weight: 600; font-size: 1.15rem; margin-bottom: 0.5rem; color: var(--primary-color); }
        .deck-info { color: #555; font-size: 0.9rem; margin-bottom: 0.3rem; }
        .dark-mode .deck-info { color: #bbb; }
        .delete-deck-btn { position: absolute; top: 8px; right: 8px; background: rgba(220, 53, 69, 0.1); color: var(--error-color); border: 1px solid rgba(220, 53, 69, 0.3); border-radius: 50%; width: 28px; height: 28px; font-size: 1rem; line-height: 28px; text-align: center; cursor: pointer; opacity: 0.8; transition: opacity 0.2s, background-color 0.2s; padding: 0; }
        .deck-item:hover .delete-deck-btn { opacity: 1; background: rgba(220, 53, 69, 0.2); }
        .create-deck-form label { display: block; margin-top: 1rem; margin-bottom: 0.5rem; font-weight: 600; font-size: 0.95rem; }
        .create-deck-form select { width: 100%; padding: 0.8rem; border: 1px solid #ccc; border-radius: 5px; font-size: 1rem; background-color: var(--background-light); color: var(--text-dark); margin-bottom: 1rem; }
        .dark-mode .create-deck-form select { background-color: #252525; border-color: #555; }
        .create-deck-form input[type="text"], .create-deck-form textarea { width: 100%; padding: 0.8rem; border: 1px solid #ccc; border-radius: 5px; font-size: 1rem; background-color: var(--background-light); color: var(--text-dark); margin-bottom: 1rem; transition: border-color 0.2s, box-shadow 0.2s; }
        .dark-mode .create-deck-form input[type="text"], .dark-mode .create-deck-form textarea { background-color: #252525; border-color: #555;}
        .create-deck-form input[type="text"]:focus, .create-deck-form textarea:focus, .create-deck-form select:focus { border-color: var(--primary-color); outline: none; box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.15); }
        .create-deck-form textarea { min-height: 80px; resize: vertical; }
        .create-deck-form button[type="submit"] { margin-top: 1.5rem; width: 100%; font-size: 1.1rem; padding: 0.9rem 1.5rem; }
        .add-card-section { border-top: 1px solid #eee; margin-top: 2rem; padding-top: 1.5rem; }
        .dark-mode .add-card-section { border-top-color: #444;}
        .add-card-section h3 { margin-bottom: 1rem; font-size: 1.3rem; }
        .term-inputs, .problem-inputs { border: 1px solid #eee; padding: 1.5rem; margin-bottom: 1.5rem; border-radius: 8px; background-color: rgba(0,0,0,0.02); position: relative; }
        .dark-mode .term-inputs, .dark-mode .problem-inputs { background-color: rgba(255,255,255,0.04); border-color: #444;}
        .term-inputs h4, .problem-inputs h4 { margin-bottom: 1rem; font-size: 1.1rem; color: var(--primary-color); }
        .delete-term-btn, .delete-problem-btn { position: absolute; top: 10px; right: 10px; background: transparent; color: var(--error-color); border: none; padding: 0.2rem 0.5rem; font-size: 1.4rem; cursor: pointer; line-height: 1; opacity: 0.6; transition: opacity 0.2s; }
        .delete-term-btn:hover, .delete-problem-btn:hover { opacity: 1; }
        #addAnotherTermBtn, #addAnotherProblemBtn { width: 100%; margin-top: 0.5rem; }
        .close-modal { background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--secondary-color); padding: 0; line-height: 1; opacity: 0.7; position: absolute; top: 1rem; right: 1.5rem;}
        .close-modal:hover { opacity: 1; color: var(--error-color); }
        .badge-earned { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9); background-color: rgba(0,0,0,0.85); color: white; padding: 2rem 3rem; border-radius: 12px; text-align: center; z-index: 1100; display: none; animation: badgeEntrance 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        @keyframes badgeEntrance { 0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); } 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); } }
        .badge-icon { font-size: 3rem; color: gold; margin-bottom: 1rem; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        .badge-earned h3 { margin-bottom: 0.5rem; font-size: 1.4rem; }
        .badge-earned p { font-size: 1rem; opacity: 0.9; }
        #achievementsList { list-style: none; padding: 0; max-height: 60vh; overflow-y: auto; }
        .achievement-item { background-color: var(--background-light); color: var(--text-dark); padding: 1rem 1.5rem; margin-bottom: 0.8rem; border-radius: 8px; border: 1px solid #eee; display: flex; align-items: center; gap: 1rem; }
        .dark-mode .achievement-item { background-color: #252525; border-color: #444; }
        .achievement-icon { font-size: 2rem; color: gold; }
        .achievement-details h4 { margin: 0 0 0.3rem 0; font-size: 1.1rem; color: var(--primary-color); }
        .achievement-details p { margin: 0; font-size: 0.9rem; color: var(--secondary-color); }
        .dark-mode .achievement-details p { color: #adb5bd; }
        #achievementsList li:empty { display: none; }
        #achievementsList .no-achievements { text-align: center; padding: 2rem; color: var(--secondary-color); }
        footer { background-color: #343a40; color: #adb5bd; text-align: center; padding: 1.5rem; margin-top: 3rem; font-size: 0.9rem; }
        .dark-mode footer { background-color: #111; }
        .math-small mjx-container {
          font-size: 14px !important;
          line-height: 1 !important;
        }
        .math-small-wrapper::-webkit-scrollbar {
          height: 6px;
        }
        .math-small-wrapper::-webkit-scrollbar-track {
          background: transparent;
        }
        .math-small-wrapper::-webkit-scrollbar-thumb {
          background-color: #bbb;
          border-radius: 4px;
          transition: background 0.3s;
        }
        .math-small-wrapper::-webkit-scrollbar-thumb:hover {
          background-color: #888;
        }
        .math-small-wrapper {
          scrollbar-width: thin;
          scrollbar-color: #bbb transparent;
        }
        .math-small svg {
          transform: scale(1);
          transform-origin: left top;
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        
        input[type="number"] {
          -moz-appearance: textfield;
        }
        .modal-header {
          display: flex;
          justify-content: center;
        }
        @media (max-width: 768px) { .container { width: 95%; margin: 1rem auto; } .flashcard { height: auto; min-height: 320px; } .flashcard-front, .flashcard-back { padding: 1.5rem; } .flashcard-term-topic { font-size: 1.5rem; } .flashcard-content, .flashcard-problem-text, .flashcard-back-content { font-size: 1rem; } .controls { gap: 0.5rem; } button, .button-style { padding: 0.7rem 1.2rem; font-size: 0.9rem; } .settings-bar { justify-content: center; } .study-modes { gap: 0.5rem; } .mode-card { width: calc(33% - 0.5rem); padding: 1rem; } .stat-value { font-size: 1.5rem; } .modal-content { max-width: 95%; padding: 1.5rem; } .quiz-option { flex-basis: 100%; } .progress-timer-container { flex-direction: column; align-items: stretch; gap: 0.5rem;} #timerDisplay { text-align: center;} }
        @media (max-width: 480px) { .flashcard { min-height: 300px; } .settings-bar { flex-direction: column; gap: 0.8rem; } .settings-left, .settings-right { width: 100%; justify-content: space-around;} .mode-card { width: calc(50% - 0.5rem); } .stats-grid { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 0.5rem;} .stat-card { padding: 0.8rem; } .stat-value { font-size: 1.3rem; } header h1 {font-size: 1.6rem;} header p {font-size: 0.9rem;} .deck-list { grid-template-columns: 1fr; } }
    </style>
    <script>
        window.MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']]
          },
          svg: {
            fontCache: 'global',
            scale: 1.5
          }
        };
      </script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" async></script>
</head>
<body>
    <audio id="backgroundMusic" loop src="background.mp3"></audio><header>
        <h1 id="header-title" data-lang-key="header-title">FlashLearn | Interactive Flashcards</h1>
        <p id="header-subtitle" data-lang-key="header-subtitle">Interactive Physics Learning</p>
    </header>

    <div class="settings-bar">
        <div class="settings-left">
            <button id="chooseDeckBtn" class="button-outline" data-lang-key="choose-deck">üìî Choose a Deck</button>
            <button id="createDeckBtn" class="button-outline" data-lang-key="create-deck">‚úçÔ∏è Create Deck</button>
            <button id="achievementsBtn" class="button-outline" data-lang-key="achievements">üèÜ Achievements</button> </div>
        <div class="settings-right">
            <div class="music-controls">
                <button id="musicToggleBtn" data-lang-key-title="play-music" title="–í–∫–ª. –º—É–∑—ã–∫—É" aria-label="–í–∫–ª/–í—ã–∫–ª –º—É–∑—ã–∫—É">üîä</button>
                <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5" data-lang-key-title="volume" title="–ì—Ä–æ–º–∫–æ—Å—Ç—å">
           </div>
             <div class="language-dropdown">
                <button id="languageToggle" class="language-toggle" aria-label="Select Language" data-lang-key="select-language" title="Select Language">üåê</button>
                <div id="languageMenu" class="language-menu">
                    <div class="language-option" data-lang="en">üá∫üá∏ English</div>
                    <div class="language-option" data-lang="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</div>
                    <div class="language-option" data-lang="es">üá™üá∏ Espa√±ol</div>
                </div>
            </div>
            <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme" data-lang-key="toggle-theme" title="Toggle theme">üåô</button>
            <button id="aboutBtn" class="button-outline" data-lang-key="about" title="About">‚ùî</button> </div>
        </div>
    </div>

     <div id="currentDeckDisplay" class="container" data-lang-key="current-deck-label">Current Deck: <span></span></div>


    <div class="container">
        <div class="study-modes">
            <div class="mode-card active" data-mode="flashcard" id="flashcardModeCard">
                <div class="mode-icon">üìñ</div>
                <h3 data-lang-key="mode-flashcards">Terms</h3>
                <p data-lang-key="mode-flashcards-desc">Learn concepts</p>
            </div>
            <div class="mode-card" data-mode="quiz" id="quizModeCard">
                <div class="mode-icon">üß†</div>
                <h3 data-lang-key="mode-quiz">Quiz</h3>
                <p data-lang-key="mode-quiz-desc">Test knowledge</p>
            </div>
            <div class="mode-card" data-mode="problems" id="problemsModeCard">
                <div class="mode-icon">üìù</div>
                <h3 data-lang-key="mode-problems">Problems</h3>
                <p data-lang-key="mode-problems-desc">–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á</p>
            </div>
        </div>

        <div class="progress-timer-container">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div id="timerDisplay">00:00</div> </div>


        <div class="flashcard-area">
            <div class="flashcard-container">
                <div class="flashcard" id="flashcard">
                    <div class="flashcard-front"></div>
                    <div class="flashcard-back"></div>
                </div>
            </div>
        </div>

        <div class="quiz-options" id="quizOptions"></div>
        <div class="problem-solver" id="problemSolverContainer">
            <label for="problemAnswerInput" data-lang-key="problem-input-label">Enter answer (number):</label>
            <input type="number" id="problemAnswerInput" placeholder="0" step="any">
            <button class="submit-answer button-style" id="submitProblemAnswer" data-lang-key="submit-answer">Submit Answer</button>
        </div>
        <div class="answer-feedback" id="answerFeedback"></div>

        <div class="controls">
            <button id="prevBtn" class="button-secondary" disabled>
                <span>‚ùÆ</span>&nbsp;<span data-lang-key="previous">Previous</span>
            </button>
            <button id="flipBtn" data-lang-key="flip-card">
                Flip
            </button>
            <button id="nextBtn">
                <span data-lang-key="next">Next</span>&nbsp;<span>‚ùØ</span>
            </button>
            <button id="shuffleBtn" class="button-outline" data-lang-key="shuffle">
                Shuffle
            </button>
        </div>

        <div class="stats-section">
            <div class="stats-header">
                <h2 data-lang-key="learning-progress">Learning Progress</h2>
                <button id="resetStatsBtn" class="button-outline" data-lang-key="reset-stats" title="–°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–µ—Å—Å–∏–∏">‚ü≤ Reset</button>
            </div>
            <div class="stats-grid">
                <div class="stat-card"><div class="stat-value" id="cardsReviewed">0</div><div class="stat-label" data-lang-key="cards-reviewed">Reviewed</div></div>
                <div class="stat-card"><div class="stat-value" id="correctAnswers">0</div><div class="stat-label" data-lang-key="correct-answers">Correct</div></div>
                <div class="stat-card"><div class="stat-value" id="totalAttempts">0</div><div class="stat-label" data-lang-key="total-attempts">Attempts</div></div>
                <div class="stat-card"><div class="stat-value" id="accuracy">0%</div><div class="stat-label" data-lang-key="accuracy-rate">Accuracy</div></div>
                <div class="stat-card"><div class="stat-value" id="streakCount">0</div><div class="stat-label" data-lang-key="current-streak">Steak</div></div>
            </div>
        </div>
    </div>

    <div class="modal" id="deckModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-lang-key="choose-deck-modal">Choose a Deck</h2>
            </div>
            <ul class="deck-list" id="deckList"></ul>
        </div>
    </div>

     <div class="modal" id="createDeckModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="createDeckModalTitle" data-lang-key="create-new-deck-modal">Create New Deck</h2>
            </div>
            <form id="createDeckForm" class="create-deck-form">
                <label for="deckTitleInput" data-lang-key="deck-title-label">Deck Title:</label>
                <input type="text" id="deckTitleInput" required>
                <label for="deckDescInput" data-lang-key="deck-desc-label">Description:</label>
                <input type="text" id="deckDescInput">
                <label for="deckTypeInput" data-lang-key="deck-type-label">Deck Type:</label>
                <select id="deckTypeInput" required>
                    <option value="terms" data-lang-key="deck-type-terms">Terms Only</option>
                    <option value="problems" data-lang-key="deck-type-problems">Problems Only</option>
                    <option value="combined" data-lang-key="deck-type-combined">"Terms and Problems</option>
                </select>
                <div class="add-card-section" id="termsSection">
                    <h3 data-lang-key="add-cards-terms-header">Add Terms</h3>
                    <div id="termsInputContainer"></div>
                    <button type="button" id="addAnotherTermBtn" class="button-outline" data-lang-key="add-another-card">Add Another Term</button>
                </div>
                <div class="add-card-section" id="problemsSection" style="display: none;">
                    <h3 data-lang-key="add-cards-problems-header">Add Problems</h3>
                    <div id="problemsInputContainer"></div>
                    <button type="button" id="addAnotherProblemBtn" class="button-outline" data-lang-key="add-another-problem">Add Another Problem</button>
                </div>
                <button type="submit" class="button-style" data-lang-key="save-deck">Save Deck</button>
            </form>
        </div>
    </div>

    <div class="modal" id="achievementsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-lang-key="achievements-modal-title">Achievements</h2>
            </div>
            <ul id="achievementsList">
                <li class="no-achievements" data-lang-key="no-achievements-yet">You haven't earned any achievements yet.</li>
            </ul>
            <div style="text-align: center; margin-top: 1.5rem;">
                <button id="resetAchievementsBtn" class="button-outline" data-lang-key="reset-achievements">Reset Achievements</button>
            </div>
        </div>
    </div>
    <div class="badge-earned" id="badgeNotification">
        <div class="badge-icon">üèÜ</div>
        <h3 data-lang-key="achievement-unlocked">Achievement Unlocked!</h3>
        <p id="badgeDescription" data-lang-key="new-badge">You earned a new badge!</p>
    </div>
    <div class="modal" id="aboutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-lang-key="about-modal-title">About FlashLearn</h2>
                </div>
            <div id="aboutContent">
                <p><a href="https://github.com/tasmulaevasan/flashlearn" target="_blank" rel="noopener noreferrer" data-lang-key="github-link" style="color: var(--primary-color); text-decoration: none;">View Project on GitHub</a></p>
                <br>
                <p data-lang-key="created-by" style="font-weight: bold;">Created by:</p>
                <ul style="list-style: none; padding-left: 0; margin-top: 0.5rem;">
                    <li>–¢–∞—Å–º—É–ª–∞–µ–≤ –ê—Å–∞–Ω</li>
                    <li>–ö–∞–ø–ø–∞—Ä–æ–≤ –ê–º–∏—Ä</li>
                </ul>
            </div>
        </div>
    </div>
    <footer>
        <p data-lang-key="footer-text">¬© 2025 FlashLearn: Interactive Flashcard | Created for educational purposes</p>
    </footer>

    <script>
        const languages = {
            en: {
                "html-title": "FlashLearn: Interactive Flashcards", "header-title": "FlashLearn: Interactive Flashcards", "header-subtitle": "Interactive Physics Learning",
                "choose-deck": "üìî Choose Deck", "create-deck": "‚úçÔ∏è Create Deck", "mode-flashcards": "Terms", "mode-flashcards-desc": "Learn concepts",
                "mode-quiz": "Quiz", "mode-quiz-desc": "Test knowledge", "mode-problems": "Problems", "mode-problems-desc": "Solve problems",
                "start-title": "Let's start!", "start-content": "Choose a deck to begin.", "ready-title": "Ready?", "ready-content": "Press 'Next'.",
                "submit-answer": "Submit Answer", "previous": "Previous", "next": "Next", "problem-solution-label": "Solution:", "flip-card": "Flip Card", "shuffle": "Shuffle",
                "original-order": "Original Order", "learning-progress": "Learning Progress", "cards-reviewed": "Reviewed", "correct-answers": "Correct",
                "total-attempts": "Attempts", "accuracy-rate": "Accuracy", "current-streak": "Streak", "reset-stats": "‚ü≤ Reset", "choose-deck-modal": "Choose a Deck",
                "create-new-deck-modal": "Create New Deck", "deck-title-label": "Deck Title:", "deck-desc-label": "Description:", "deck-type-label": "Deck Type:",
                "deck-type-terms": "Terms Only", "deck-type-problems": "Problems Only", "deck-type-combined": "Terms and Problems",
                "add-cards-terms-header": "Add Terms", "add-another-card": "Add Another Term", "add-cards-problems-header": "Add Problems",
                "add-another-problem": "Add Another Problem",
                "card-front-title-label": "Term/Topic:", "card-front-content-label": "Prompt/Definition:", "card-back-formula-label": "Formula:", "card-back-units-label": "Units:", "card-back-vars-label": "Variables:", "card-back-content-label": "Explanation:",
                "problem-title-label": "Problem Title:", "problem-content-label": "Problem:", "problem-answer-label": "Answer (Number):",
                "save-deck": "Save Deck", "achievement-unlocked": "Achievement Unlocked!",
                "new-badge": "You earned a new badge!", "streak-title": "Streak!", "streak-5-desc": "5 correct answers in a row!",
                "streak-10-desc": "10 correct answers in a row! Amazing!", "deck-completed-title": "Deck Completed!",
                "deck-completed-desc": "You've studied all cards in this deck.", "correct-feedback": "Correct! ‚úÖ",
                "incorrect-feedback": "Incorrect ‚ùå The correct answer was:", "problem-input-label": "Enter answer (number):", "input-placeholder": "0",
                "footer-text": "¬© 2025 FlashLearn: Interactive Flashcard | Created for educational purposes", "no-decks-available": "No decks available. Create one!",
                "select-language": "Select Language", "toggle-theme": "Toggle theme", "confirm-delete": "Delete deck", "deck-title-required": "Deck title is required.",
                "add-one-card-alert": "Add at least one valid term or problem.", "deck-created-success": "Deck", "created-successfully": "created successfully!",
                "one-card-required-alert": "At least one card is required.", "term-header": "Term", "delete-term": "Delete Term", "problem-header": "Problem",
                "delete-problem": "Delete Problem", "no-options": "No options available.",
                "achievements": "üèÜ Achievements", "achievements-modal-title": "Achievements", "no-achievements-yet": "You haven't earned any achievements yet.", "current-deck-label": "Current Deck:",
                "perfection-quiz-title": "Perfection (Quiz)", "perfection-quiz-desc": "Answered all quiz questions correctly in one session!",
                "perfection-problems-title": "Perfection (Problems)", "perfection-problems-desc": "Answered all problems correctly in one session!",
                "play-music": "Play Music", "pause-music": "Pause Music", "volume": "Volume",
                "about": "?", "about-modal-title": "About FlashLearn", "github-link": "View Project on GitHub", "created-by": "Developers:", "reset-achievements": "Reset Achievements",
                "confirm-reset-achievements": "Are you sure you want to reset all achievements? This cannot be undone.", "achievements-reset-success": "Achievements have been reset.",
                "deck-completed-title-base": "Deck Completed!",
                "attempts-title": "Practice Makes Perfect!", "attempts-50-desc": "Completed 50 attempts!", "attempts-100-desc": "Completed 100 attempts! Keep going!", "attempts-250-desc": "Completed 250 attempts! Dedication!",
                "streak-15-desc": "15 correct answers in a row! You're on fire!",
                "streak-20-desc": "20 correct answers in a row! Incredible!",
                "streak-25-desc": "25 correct answers in a row! Champion!",
                "streak-30-desc": "30 correct answers in a row! Outstanding!",
                "streak-35-desc": "35 correct answers in a row! Amazing streak!",
                "streak-40-desc": "40 correct answers in a row! You're unstoppable!",
                "streak-45-desc": "45 correct answers in a row! Elite level!",
                "streak-50-desc": "50 correct answers in a row! FlashLearn legend!",
                "attempts-10-desc": "Completed 10 attempts! Getting started!",
                "attempts-150-desc": "Completed 150 attempts! You're serious!",
                "attempts-200-desc": "Completed 200 attempts! Persistence pays off!"
            },
            ru: {
                "html-title": "FlashLearn: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏", "header-title": "FlashLearn: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏", "header-subtitle": "–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ —Ñ–∏–∑–∏–∫–∏",
                "choose-deck": "üìî –í—ã–±—Ä–∞—Ç—å –∫–æ–ª–æ–¥—É", "create-deck": "‚úçÔ∏è –°–æ–∑–¥–∞—Ç—å –∫–æ–ª–æ–¥—É", "mode-flashcards": "–¢–µ—Ä–º–∏–Ω—ã", "mode-flashcards-desc": "–ò–∑—É—á–µ–Ω–∏–µ –ø–æ–Ω—è—Ç–∏–π",
                "mode-quiz": "–¢–µ—Å—Ç", "mode-quiz-desc": "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞–Ω–∏–π", "mode-problems": "–ó–∞–¥–∞—á–∏", "mode-problems-desc": "–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á",
                "start-title": "–ù–∞—á–Ω–µ–º!", "start-content": "–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–æ–¥—É –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è.", "ready-title": "–ì–æ—Ç–æ–≤—ã?", "ready-content": "–ù–∞–∂–º–∏—Ç–µ '–î–∞–ª–µ–µ'.",
                "submit-answer": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç", "previous": "–ù–∞–∑–∞–¥", "next": "–î–∞–ª–µ–µ", "flip-card": "–ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å", "shuffle": "–ü–µ—Ä–µ–º–µ—à–∞—Ç—å",
                "original-order": "–ü–æ –ø–æ—Ä—è–¥–∫—É", "learning-progress": "–ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è", "problem-solution-label": "–†–µ—à–µ–Ω–∏–µ:", "cards-reviewed": "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ", "correct-answers": "–ü—Ä–∞–≤–∏–ª—å–Ω–æ",
                "total-attempts": "–ü–æ–ø—ã—Ç–æ–∫", "accuracy-rate": "–¢–æ—á–Ω–æ—Å—Ç—å", "current-streak": "–°–µ—Ä–∏—è", "reset-stats": "‚ü≤ –°–±—Ä–æ—Å–∏—Ç—å", "choose-deck-modal": "–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–æ–¥—É",
                "create-new-deck-modal": "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–ª–æ–¥—É", "deck-title-label": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã:", "deck-desc-label": "–û–ø–∏—Å–∞–Ω–∏–µ:", "deck-type-label": "–¢–∏–ø –∫–æ–ª–æ–¥—ã:",
                "deck-type-terms": "–¢–æ–ª—å–∫–æ —Ç–µ—Ä–º–∏–Ω—ã", "deck-type-problems": "–¢–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏", "deck-type-combined": "–¢–µ—Ä–º–∏–Ω—ã –∏ –∑–∞–¥–∞—á–∏",
                "add-cards-terms-header": "–î–æ–±–∞–≤–∏—Ç—å –¢–µ—Ä–º–∏–Ω—ã", "add-another-card": "–î–æ–±–∞–≤–∏—Ç—å –µ—â–µ —Ç–µ—Ä–º–∏–Ω", "add-cards-problems-header": "–î–æ–±–∞–≤–∏—Ç—å –ó–∞–¥–∞—á–∏",
                "add-another-problem": "–î–æ–±–∞–≤–∏—Ç—å –µ—â–µ –∑–∞–¥–∞—á—É",
                "card-front-title-label": "–¢–µ–º–∞/–¢–µ—Ä–º–∏–Ω:", "card-front-content-label": "–í–æ–ø—Ä–æ—Å/–û–ø–∏—Å–∞–Ω–∏–µ:", "card-back-formula-label": "–§–æ—Ä–º—É–ª–∞:", "card-back-units-label": "–ï–¥. –∏–∑–º.:", "card-back-vars-label": "–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:", "card-back-content-label": "–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:",
                "problem-title-label": "–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:", "problem-content-label": "–ó–∞–¥–∞—á–∞:", "problem-answer-label": "–û—Ç–≤–µ—Ç (—á–∏—Å–ª–æ):",
                "save-deck": "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–ª–æ–¥—É", "achievement-unlocked": "–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ!",
                "new-badge": "–í—ã –ø–æ–ª—É—á–∏–ª–∏ –∑–Ω–∞—á–æ–∫!", "streak-title": "–°–µ—Ä–∏—è!", "streak-5-desc": "5 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥!",
                "streak-10-desc": "10 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥! –û—Ç–ª–∏—á–Ω–æ!", "deck-completed-title": "–ö–æ–ª–æ–¥–∞ –∏–∑—É—á–µ–Ω–∞!",
                "deck-completed-desc": "–í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —ç—Ç–æ–π –∫–æ–ª–æ–¥–µ.", "correct-feedback": "–ü—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úÖ",
                "incorrect-feedback": "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚ùå –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:", "problem-input-label": "–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç (—á–∏—Å–ª–æ):", "input-placeholder": "0",
                "footer-text": "¬© 2025 FlashLearn: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ | –°–æ–∑–¥–∞–Ω–æ –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö", "no-decks-available": "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–ª–æ–¥. –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é!",
                "select-language": "–í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫", "toggle-theme": "–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É", "confirm-delete": "–£–¥–∞–ª–∏—Ç—å –∫–æ–ª–æ–¥—É", "deck-title-required": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.",
                "add-one-card-alert": "–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–∞–ª–∏–¥–Ω—ã–π —Ç–µ—Ä–º–∏–Ω –∏–ª–∏ –∑–∞–¥–∞—á—É.", "deck-created-success": "–ö–æ–ª–æ–¥–∞", "created-successfully": "—É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!",
                "one-card-required-alert": "–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞.", "term-header": "–¢–µ—Ä–º–∏–Ω", "delete-term": "–£–¥–∞–ª–∏—Ç—å –¢–µ—Ä–º–∏–Ω", "problem-header": "–ó–∞–¥–∞—á–∞",
                "delete-problem": "–£–¥–∞–ª–∏—Ç—å –ó–∞–¥–∞—á—É", "no-options": "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.",
                "achievements": "üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è", "achievements-modal-title": "–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è", "no-achievements-yet": "–í—ã –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π.", "current-deck-label": "–¢–µ–∫—É—â–∞—è –∫–æ–ª–æ–¥–∞:",
                "perfection-quiz-title": "–ë–µ–∑—É–ø—Ä–µ—á–Ω–æ—Å—Ç—å (–¢–µ—Å—Ç)", "perfection-quiz-desc": "–í—Å–µ –æ—Ç–≤–µ—Ç—ã –≤ —Ç–µ—Å—Ç–µ –≤–µ—Ä–Ω—ã –∑–∞ –æ–¥–Ω—É —Å–µ—Å—Å–∏—é!",
                "perfection-problems-title": "–ë–µ–∑—É–ø—Ä–µ—á–Ω–æ—Å—Ç—å (–ó–∞–¥–∞—á–∏)", "perfection-problems-desc": "–í—Å–µ –∑–∞–¥–∞—á–∏ —Ä–µ—à–µ–Ω—ã –≤–µ—Ä–Ω–æ –∑–∞ –æ–¥–Ω—É —Å–µ—Å—Å–∏—é!",
                "play-music": "–í–∫–ª. –º—É–∑—ã–∫—É", "pause-music": "–í—ã–∫–ª. –º—É–∑—ã–∫—É", "volume": "–ì—Ä–æ–º–∫–æ—Å—Ç—å",
                "about": "?", "about-modal-title": "–û FlashLearn", "github-link": "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub", "created-by": "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏:", "reset-achievements": "–°–±—Ä–æ—Å–∏—Ç—å –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è",
                "confirm-reset-achievements": "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.", "achievements-reset-success": "–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å–±—Ä–æ—à–µ–Ω—ã.",
                "deck-completed-title-base": "–ö–æ–ª–æ–¥–∞ –ò–∑—É—á–µ–Ω–∞!",
                "attempts-title": "–ü—Ä–∞–∫—Ç–∏–∫–∞ - –ü—É—Ç—å –∫ –ú–∞—Å—Ç–µ—Ä—Å—Ç–≤—É!", "attempts-50-desc": "–°–æ–≤–µ—Ä—à–µ–Ω–æ 50 –ø–æ–ø—ã—Ç–æ–∫!", "attempts-100-desc": "–°–æ–≤–µ—Ä—à–µ–Ω–æ 100 –ø–æ–ø—ã—Ç–æ–∫! –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ!", "attempts-250-desc": "–°–æ–≤–µ—Ä—à–µ–Ω–æ 250 –ø–æ–ø—ã—Ç–æ–∫! –£–ø–æ—Ä—Å—Ç–≤–æ!",
                "streak-15-desc": "15 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥! –í—ã –Ω–∞ –≤–æ–ª–Ω–µ!",
                "streak-20-desc": "20 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥! –ü–æ—Ç—Ä—è—Å–∞—é—â–µ!",
                "streak-25-desc": "25 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥! –ß–µ–º–ø–∏–æ–Ω!",
                "streak-30-desc": "30 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥! –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ!",
                "streak-35-desc": "35 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥! –ù–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è —Å–µ—Ä–∏—è!",
                "streak-40-desc": "40 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥! –í–∞—Å –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å!",
                "streak-45-desc": "45 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥! –£—Ä–æ–≤–µ–Ω—å —ç–ª–∏—Ç—ã!",
                "streak-50-desc": "50 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–¥—Ä—è–¥! –õ–µ–≥–µ–Ω–¥–∞ FlashLearn!",
                "attempts-10-desc": "–°–æ–≤–µ—Ä—à–µ–Ω–æ 10 –ø–æ–ø—ã—Ç–æ–∫! –•–æ—Ä–æ—à–µ–µ –Ω–∞—á–∞–ª–æ!",
                "attempts-150-desc": "–°–æ–≤–µ—Ä—à–µ–Ω–æ 150 –ø–æ–ø—ã—Ç–æ–∫! –í—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–µ—Ä—å–µ–∑–Ω–æ!",
                "attempts-200-desc": "–°–æ–≤–µ—Ä—à–µ–Ω–æ 200 –ø–æ–ø—ã—Ç–æ–∫! –ù–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –ø—Ä–∏–Ω–æ—Å–∏—Ç –ø–ª–æ–¥—ã!",
            },
            es: {
                "html-title": "FlashLearn: Tarjetas interactivas", "header-title": "FlashLearn: Tarjetas interactivas", "header-subtitle": "Aprendizaje Interactivo de F√≠sica",
                "choose-deck": "üìî Elegir Mazo", "create-deck": "‚úçÔ∏è Crear Mazo", "mode-flashcards": "T√©rminos", "mode-flashcards-desc": "Aprender conceptos",
                "mode-quiz": "Prueba", "mode-quiz-desc": "Evaluar conocimiento", "mode-problems": "Problemas", "mode-problems-desc": "Resolver problemas",
                "start-title": "¬°Empecemos!", "start-content": "Elige un mazo para empezar.", "ready-title": "¬øListo?", "ready-content": "Pulsa 'Siguiente'.",
                "submit-answer": "Enviar Respuesta", "previous": "Anterior", "next": "Siguiente", "flip-card": "Voltear Tarjeta", "shuffle": "Mezclar",
                "original-order": "Orden Original", "learning-progress": "Progreso de Aprendizaje", "cards-reviewed": "Revisadas", "correct-answers": "Correctas",
                "total-attempts": "Intentos", "accuracy-rate": "Precisi√≥n", "current-streak": "Racha", "reset-stats": "‚ü≤ Reiniciar", "choose-deck-modal": "Elige un Mazo",
                "create-new-deck-modal": "Crear Nuevo Mazo", "deck-title-label": "T√≠tulo del Mazo:", "deck-desc-label": "Descripci√≥n:", "deck-type-label": "Tipo de Mazo:",
                "deck-type-terms": "Solo T√©rminos", "deck-type-problems": "Solo Problemas", "deck-type-combined": "T√©rminos y Problemas",
                "add-cards-terms-header": "A√±adir T√©rminos", "add-another-card": "A√±adir Otro T√©rmino", "add-cards-problems-header": "A√±adir Problemas",
                "add-another-problem": "A√±adir Otro Problema",
                 "card-front-title-label": "Tema/T√©rmino:", "card-front-content-label": "Pregunta/Descripci√≥n:", "card-back-formula-label": "F√≥rmula:", "card-back-units-label": "Unidades:", "card-back-vars-label": "Variables:", "card-back-content-label": "Explicaci√≥n:",
                 "problem-title-label": "T√≠tulo del Problema:", "problem-content-label": "Problema:", "problem-answer-label": "Respuesta (N√∫mero):",
                 "save-deck": "Guardar Mazo", "achievement-unlocked": "¬°Logro Desbloqueado!",
                "new-badge": "¬°Has ganado una nueva insignia!", "streak-title": "¬°Racha!", "streak-5-desc": "¬°5 respuestas correctas seguidas!",
                "streak-10-desc": "¬°10 respuestas correctas seguidas! ¬°Incre√≠ble!", "deck-completed-title": "¬°Mazo Completado!",
                "deck-completed-desc": "Has estudiado todas las tarjetas de este mazo.", "correct-feedback": "¬°Correcto! ‚úÖ",
                "incorrect-feedback": "Incorrecto ‚ùå La respuesta correcta era:", "problem-input-label": "Introduce la respuesta (n√∫mero):", "input-placeholder": "0",
                "footer-text": "¬© 2025 FlashLearn: Tarjetas interactivas | Creado con fines educativos", "no-decks-available": "No hay mazos disponibles. ¬°Crea uno!",
                "select-language": "Seleccionar idioma", "toggle-theme": "Alternar tema", "confirm-delete": "Eliminar mazo", "deck-title-required": "El t√≠tulo del mazo es obligatorio.",
                "add-one-card-alert": "A√±ade al menos un t√©rmino o problema v√°lido.", "deck-created-success": "Mazo", "created-successfully": "creado con √©xito!",
                "one-card-required-alert": "Se requiere al menos una tarjeta.", "term-header": "T√©rmino", "delete-term": "Eliminar T√©rmino", "problem-header": "Problema",
                "delete-problem": "Eliminar Problema", "no-options": "No hay opciones disponibles.",
                 "achievements": "üèÜ Logros", "achievements-modal-title": "Logros", "no-achievements-yet": "A√∫n no has conseguido ning√∫n logro.", "current-deck-label": "Mazo actual:",
                "perfection-quiz-title": "Perfecci√≥n (Prueba)", "perfection-quiz-desc": "¬°Respondiste correctamente todas las preguntas de la prueba en una sesi√≥n!",
                "perfection-problems-title": "Perfecci√≥n (Problemas)", "perfection-problems-desc": "¬°Resolviste correctamente todos los problemas en una sesi√≥n!",
                "play-music": "Reproducir M√∫sica", "pause-music": "Pausar M√∫sica", "volume": "Volumen",
                "about": "?", "about-modal-title": "Acerca de FlashLearn", "github-link": "Ver Proyecto en GitHub", "created-by": "Creado por:", "reset-achievements": "Reiniciar Logros",
                "confirm-reset-achievements": "¬øEst√°s seguro de que quieres reiniciar todos los logros? Esta acci√≥n no se puede deshacer.", "achievements-reset-success": "Los logros han sido reiniciados.",
                "deck-completed-title-base": "¬°Mazo Completado!",
                "attempts-title": "¬°La Pr√°ctica Hace al Maestro!", "attempts-50-desc": "¬°Completados 50 intentos!", "attempts-100-desc": "¬°Completados 100 intentos! ¬°Sigue as√≠!", "attempts-250-desc": "¬°Completados 250 intentos! ¬°Dedicaci√≥n!",
                "streak-15-desc": "¬°15 respuestas correctas seguidas! ¬°Est√°s en llamas!",
                "streak-20-desc": "¬°20 respuestas correctas seguidas! ¬°Incre√≠ble!",
                "streak-25-desc": "¬°25 respuestas correctas seguidas! ¬°Campe√≥n!",
                "streak-30-desc": "¬°30 respuestas correctas seguidas! ¬°Excepcional!",
                "streak-35-desc": "¬°35 respuestas correctas seguidas! ¬°Racha impresionante!",
                "streak-40-desc": "¬°40 respuestas correctas seguidas! ¬°Imparable!",
                "streak-45-desc": "¬°45 respuestas correctas seguidas! ¬°Nivel √©lite!",
                "streak-50-desc": "¬°50 respuestas correctas seguidas! ¬°Leyenda de FlashLearn!",
                "attempts-10-desc": "¬°10 intentos completados! ¬°Buen comienzo!",
                "attempts-150-desc": "¬°150 intentos completados! ¬°Vas en serio!",
                "attempts-200-desc": "¬°200 intentos completados! ¬°La persistencia da frutos!", "problem-solution-label": "Soluci√≥n:"
            }
        };

        const predefinedDecksMultiLang = {
            'physics-combined-ru': {
                ru: {
                    title: '–§–∏–∑–∏–∫–∞: –û—Å–Ω–æ–≤—ã',
                    description: '–ò–∑—É—á–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω—ã –∏ —Ä–µ—à–∏—Ç–µ –∑–∞–¥–∞—á–∏',
                    deckType: 'combined',
                    termsCards: [
                        { front: { title: "–ü–µ—Ä–≤—ã–π –∑–∞–∫–æ–Ω –ù—å—é—Ç–æ–Ω–∞", content: "–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –∑–∞–∫–æ–Ω –∏–Ω–µ—Ä—Ü–∏–∏."}, back: { title: "–ó–∞–∫–æ–Ω –ò–Ω–µ—Ä—Ü–∏–∏", formula:"$\\vec{F} = 0 \\implies \\vec{v} = const$", units:"$\\vec{v}$ = 1 $\\frac{–º}{—Å}$", vars:"$\\vec{F}$ - —Ä–∞–≤–Ω–æ–¥–µ–π—Å—Ç–≤—É—é—â–∞—è —Å–∏–ª–∞, $\\vec{v}$ - —Å–∫–æ—Ä–æ—Å—Ç—å", content: "–°—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–∞–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã –æ—Ç—Å—á–µ—Ç–∞ (–∏–Ω–µ—Ä—Ü–∏–∞–ª—å–Ω—ã–µ), –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ç–æ—Ä—ã—Ö —Ç–µ–ª–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–≤–æ—é —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π, –µ—Å–ª–∏ –Ω–∞ –Ω–µ–≥–æ –Ω–µ –¥–µ–π—Å—Ç–≤—É—é—Ç –¥—Ä—É–≥–∏–µ —Ç–µ–ª–∞ –∏–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ —ç—Ç–∏—Ö —Ç–µ–ª —Å–∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞–Ω–æ."}},
                        { front: { title: "–í—Ç–æ—Ä–æ–π –∑–∞–∫–æ–Ω –ù—å—é—Ç–æ–Ω–∞", content: "–û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–∫–æ–Ω –¥–∏–Ω–∞–º–∏–∫–∏."}, back: { title: "F = ma", formula:"$\\vec{F} = m\\vec{a}$", units:"$\\vec{F}$ = 1 –ù, $m$ = 1 –∫–≥, $\\vec{a}$ = 1 $\\frac{–º}{—Å¬≤}$", vars:"$\\vec{F}$ - —Ä–∞–≤–Ω–æ–¥–µ–π—Å—Ç–≤—É—é—â–∞—è —Å–∏–ª–∞, $m$ - –º–∞—Å—Å–∞, $\\vec{a}$ - —É—Å–∫–æ—Ä–µ–Ω–∏–µ", content: "–£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ç–µ–ª–∞ –ø—Ä—è–º–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ä–∞–≤–Ω–æ–¥–µ–π—Å—Ç–≤—É—é—â–µ–π —Å–∏–ª, –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫ —Ç–µ–ª—É, –∏ –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –µ–≥–æ –º–∞—Å—Å–µ."}},
                        { front: { title: "–¢—Ä–µ—Ç–∏–π –∑–∞–∫–æ–Ω –ù—å—é—Ç–æ–Ω–∞", content: "–ó–∞–∫–æ–Ω –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ç–µ–ª."}, back: { title: "–î–µ–π—Å—Ç–≤–∏–µ = –ü—Ä–æ—Ç–∏–≤–æ–¥–µ–π—Å—Ç–≤–∏–µ", formula:"$\\vec{F}_{1} = -\\vec{F}_{2}$", units:"$\\vec{F}$ = 1 H", vars:"$\\vec{F}_{1}$ - —Å–∏–ª–∞, –¥–µ–π—Å—Ç–≤—É—é—â–∞—è –Ω–∞ —Ç–µ–ª–æ 1 —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã —Ç–µ–ª–∞ 2", content: "–°–∏–ª—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –¥–≤–∞ —Ç–µ–ª–∞ –¥–µ–π—Å—Ç–≤—É—é—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞, —Ä–∞–≤–Ω—ã –ø–æ –º–æ–¥—É–ª—é –∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é."}},
                        { front: { title: "–ó–∞–∫–æ–Ω –≤—Å–µ–º–∏—Ä–Ω–æ–≥–æ —Ç—è–≥–æ—Ç–µ–Ω–∏—è", content: "–ö–∞–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –º–∞—Å—Å—ã?"}, back: { title: "–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è", formula:"$F = G \\frac{m_1 m_2}{R^2}$", units:"$F$ = 1 H, $m$ = 1 –∫–≥, $R$ = 1 –º", vars:"$G$ - –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è ($‚âà 6.67 \\times 10^{-11}$ –ù¬∑–º¬≤/–∫–≥¬≤), $m_1, m_2$ - –º–∞—Å—Å—ã —Ç–µ–ª, $R$ - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ", content: "–î–≤–∞ –ª—é–±—ã—Ö —Ç–µ–ª–∞ –ø—Ä–∏—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É —Å —Å–∏–ª–æ–π, –ø—Ä—è–º–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é –∏—Ö –º–∞—Å—Å –∏ –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫–≤–∞–¥—Ä–∞—Ç—É —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏."}},
                        { front: { title: "–í–µ—Å —Ç–µ–ª–∞", content: "–°–∏–ª–∞ –¥–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –æ–ø–æ—Ä—É." }, back: { title: "P = mg (–≤ –ø–æ–∫–æ–µ)", formula: "$\\vec{P} = m(\\vec{g} - \\vec{a})$", units: "$P$ = 1 –ù, $m$ = 1 –∫–≥, $\\vec{g}$ = 10 $\\frac{–º}{—Å¬≤}$", vars: "$m$ - –º–∞—Å—Å–∞, $\\vec{g}$ - —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è, $\\vec{a}$ - —É—Å–∫–æ—Ä–µ–Ω–∏–µ –æ–ø–æ—Ä—ã/–ø–æ–¥–≤–µ—Å–∞", content: "–°–∏–ª–∞, —Å –∫–æ—Ç–æ—Ä–æ–π —Ç–µ–ª–æ –≤—Å–ª–µ–¥—Å—Ç–≤–∏–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è –∫ –ó–µ–º–ª–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –æ–ø–æ—Ä—É –∏–ª–∏ –ø–æ–¥–≤–µ—Å. –ù–µ –ø—É—Ç–∞—Ç—å —Å –º–∞—Å—Å–æ–π!"}},
                        { front: { title: "–ò–º–ø—É–ª—å—Å —Ç–µ–ª–∞", content: "–ú–µ—Ä–∞ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è." }, back: { title: "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–≤–∏–∂–µ–Ω–∏—è", formula: "$\\vec{p} = m\\vec{v}$", units: "$\\vec{p}$ = 1 $\\frac{–∫–≥¬∑–º}{—Å}$", vars: "$m$ - –º–∞—Å—Å–∞, $\\vec{v}$ - —Å–∫–æ—Ä–æ—Å—Ç—å", content: "–í–µ–∫—Ç–æ—Ä–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –≤–µ–ª–∏—á–∏–Ω–∞, —Ä–∞–≤–Ω–∞—è –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é –º–∞—Å—Å—ã —Ç–µ–ª–∞ –Ω–∞ –µ–≥–æ —Å–∫–æ—Ä–æ—Å—Ç—å."}},
                        { front: { title: "–ò–º–ø—É–ª—å—Å —Å–∏–ª—ã", content: "–ú–µ—Ä–∞ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è —Å–∏–ª—ã –∑–∞ –≤—Ä–µ–º—è." }, back: { title: "–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–ø—É–ª—å—Å–∞ —Ç–µ–ª–∞", formula: "$\\Delta \\vec{p} = \\vec{F} \\Delta t$", units: "$\\Delta \\vec{p}$ = 1 $\\frac{–∫–≥¬∑–º}{—Å}$, $\\vec{F}$ = 1 –ù, $\\Delta t$ = 1 —Å", vars: "$\\vec{F}$ - —Å–∏–ª–∞, $\\Delta t$ - –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è —Å–∏–ª—ã", content: "–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Å–∏–ª—ã –Ω–∞ –≤—Ä–µ–º—è –µ–µ –¥–µ–π—Å—Ç–≤–∏—è, —Ä–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏—é –∏–º–ø—É–ª—å—Å–∞ —Ç–µ–ª–∞." }},
                        { front: { title: "–ó–∞–∫–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–ø—É–ª—å—Å–∞", content: "–ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∑–∞–º–∫–Ω—É—Ç–æ–π —Å–∏—Å—Ç–µ–º–µ?" }, back: { title: "–°—É–º–º–∞—Ä–Ω—ã–π –∏–º–ø—É–ª—å—Å", formula: "$\\sum \\vec{p}_{–¥–æ} = \\sum \\vec{p}_{–ø–æ—Å–ª–µ}$", units: "$\\vec{p}$ = 1 $\\frac{–∫–≥¬∑–º}{—Å}$", vars: "$\\vec{p}$ - –∏–º–ø—É–ª—å—Å —Ç–µ–ª–∞", content: "–í –∑–∞–º–∫–Ω—É—Ç–æ–π —Å–∏—Å—Ç–µ–º–µ —Ç–µ–ª –≤–µ–∫—Ç–æ—Ä–Ω–∞—è —Å—É–º–º–∞ –∏–º–ø—É–ª—å—Å–æ–≤ –≤—Å–µ—Ö —Ç–µ–ª —Å–∏—Å—Ç–µ–º—ã –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –ø—Ä–∏ –ª—é–±—ã—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è—Ö —Ç–µ–ª —ç—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã –º–µ–∂–¥—É —Å–æ–±–æ–π." }},
                        { front: { title: "–ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è", content: "–≠–Ω–µ—Ä–≥–∏—è –¥–≤–∏–∂—É—â–µ–≥–æ—Å—è —Ç–µ–ª–∞." }, back: { title: "–≠–Ω–µ—Ä–≥–∏—è –¥–≤–∏–∂–µ–Ω–∏—è", formula: "$E_k = \\frac{mv^2}{2}$", units: "$E_k$ = 1 –î–∂, $m$ = 1 –∫–≥, $v$ = 1 $\\frac{–º}{—Å}$", vars: "$m$ - –º–∞—Å—Å–∞, $v$ - —Å–∫–æ—Ä–æ—Å—Ç—å", content: "–≠–Ω–µ—Ä–≥–∏—è, –∫–æ—Ç–æ—Ä–æ–π –æ–±–ª–∞–¥–∞–µ—Ç —Ç–µ–ª–æ –≤—Å–ª–µ–¥—Å—Ç–≤–∏–µ —Å–≤–æ–µ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è." }},
                        { front: { title: "–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è", content: "–≠–Ω–µ—Ä–≥–∏—è –ø–æ–ª–æ–∂–µ–Ω–∏—è –≤ –ø–æ–ª–µ —Ç—è–∂–µ—Å—Ç–∏." }, back: { title: "–≠–Ω–µ—Ä–≥–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è", formula: "$E_p = mgh$", units: "$E_p$ = 1 –î–∂, $m$ = 1 –∫–≥, $g$ = 10 $\\frac{–º}{—Å¬≤}$, $h$ = 1 –º", vars: "$m$ - –º–∞—Å—Å–∞, $g$ - —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è, $h$ - –≤—ã—Å–æ—Ç–∞", content: "–≠–Ω–µ—Ä–≥–∏—è, –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–Ω–∞—è –≤–∑–∞–∏–º–Ω—ã–º —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º —Ç–µ–ª –≤ –ø–æ–ª–µ —Ç—è–≥–æ—Ç–µ–Ω–∏—è –ó–µ–º–ª–∏." }},
                        { front: { title: "–ó–∞–∫–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏", content: "–§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∑–∞–∫–æ–Ω –ø—Ä–∏—Ä–æ–¥—ã." }, back: { title: "–ü–æ–ª–Ω–∞—è –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è", formula: "$E_k + E_p = const$", units: "$E_k$ = 1 –î–∂, $E_p$ = 1 –î–∂", vars: "$E_k$ - –∫–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è, $E_p$ - –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è", content: "–ü–æ–ª–Ω–∞—è –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è –∑–∞–º–∫–Ω—É—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã —Ç–µ–ª, –≤ –∫–æ—Ç–æ—Ä–æ–π –¥–µ–π—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ —Å–∏–ª—ã, –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π." }},
                        { front: { title: "–î–ª–∏–Ω–∞ –≤–æ–ª–Ω—ã", content: "–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É '–≥—Ä–µ–±–Ω—è–º–∏'." }, back: { title: "Œª", formula: "$\\lambda = vT = \\frac{v}{f}$", units: "$\\lambda$ = 1 –º, $v$ = 1 $\\frac{–º}{—Å}$, $f$ = 1 –ì—Ü", vars: "$v$ - —Å–∫–æ—Ä–æ—Å—Ç—å –≤–æ–ª–Ω—ã, $T$ - –ø–µ—Ä–∏–æ–¥, $f$ - —á–∞—Å—Ç–æ—Ç–∞", content: "–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è –±–ª–∏–∂–∞–π—à–∏–º–∏ —Ç–æ—á–∫–∞–º–∏, –∫–æ–ª–µ–±–ª—é—â–∏–º–∏—Å—è –≤ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Ñ–∞–∑–µ." }},
                        { front: { title: "–ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–ª–µ–±–∞–Ω–∏–π", content: "–ö–∞–∫ —á–∞—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∫–æ–ª–µ–±–∞–Ω–∏—è?" }, back: { title: "f –∏–ª–∏ ŒΩ", formula: "$f = \\frac{1}{T}$", units: "$f$ = 1 –ì—Ü, $T$ = 1 —Å", vars: "$T$ - –ø–µ—Ä–∏–æ–¥ –∫–æ–ª–µ–±–∞–Ω–∏–π", content: "–ß–∏—Å–ª–æ –ø–æ–ª–Ω—ã—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π, —Å–æ–≤–µ—Ä—à–∞–µ–º—ã—Ö –∑–∞ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏." }},
                        { front: { title: "–°–∫–æ—Ä–æ—Å—Ç—å —Å–≤–µ—Ç–∞ –≤ –≤–∞–∫—É—É–º–µ", content: "–ü—Ä–µ–¥–µ–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å." }, back: { title: "c", formula: "$c \\approx 3 \\times 10^8$", units: "$c$ = $3 \\times 10^8$ $\\frac{–º}{—Å}$", vars: "$c$ - —Å–∫–æ—Ä–æ—Å—Ç—å —Å–≤–µ—Ç–∞ –≤ –≤–∞–∫—É—É–º–µ", content: "–§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π." }},
                        { front: { title: "–ú–æ—â–Ω–æ—Å—Ç—å", content: "–°–∫–æ—Ä–æ—Å—Ç—å —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã." }, back: { title: "N –∏–ª–∏ P", formula: "$N = \\frac{A}{t} = Fv \\cos(\\alpha)$", units: "$N$ = 1 –í—Ç, $A$ = 1 –î–∂, $t$ = 1 —Å, $F$ = 1 –ù, $v$ = 1 $\\frac{–º}{—Å}$", vars: "$A$ - —Ä–∞–±–æ—Ç–∞, $t$ - –≤—Ä–µ–º—è, $F$ - —Å–∏–ª–∞, $v$ - —Å–∫–æ—Ä–æ—Å—Ç—å", content: "–§–∏–∑–∏—á–µ—Å–∫–∞—è –≤–µ–ª–∏—á–∏–Ω–∞, —Ä–∞–≤–Ω–∞—è –æ—Ç–Ω–æ—à–µ–Ω–∏—é —Ä–∞–±–æ—Ç—ã, —Å–æ–≤–µ—Ä—à–∞–µ–º–æ–π –∑–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏, –∫ —ç—Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–∏." }},
                        { front: { title: "–†–∞–±–æ—Ç–∞ —Å–∏–ª—ã", content: "–ú–µ—Ä–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–∏–ª—ã –ø–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—é." }, back: { title: "A", formula: "$A = Fs \\cos(\\alpha)$", units: "$A$ = 1 –î–∂, $F$ = 1 –ù, $s$ = 1 –º", vars: "$F$ - —Å–∏–ª–∞, $s$ - –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, $\\alpha$ - —É–≥–æ–ª –º–µ–∂–¥—É –≤–µ–∫—Ç–æ—Ä–æ–º —Å–∏–ª—ã –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è", content: "–ò–∑–º–µ–Ω–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ —Å–∏—Å—Ç–µ–º—ã –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –Ω–µ–µ —Å–∏–ª—ã." }},
                        { front: { title: "–£—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–ø–ª–æ–≤–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞", content: "–¢–µ–ø–ª–æ–æ–±–º–µ–Ω –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ." }, back: { title: "Q_–æ—Ç–¥ + Q_–ø–æ–ª = 0", formula: "$\\sum Q_i = 0$", units: "$Q$ = 1 –î–∂", vars: "$Q$ - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–ø–ª–æ—Ç—ã, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ —Ç–µ–ª–æ–º", content: "–í –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —Å—É–º–º–∞ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤ —Ç–µ–ø–ª–æ—Ç—ã —Ä–∞–≤–Ω–∞ –Ω—É–ª—é." }},
                        { front: { title: "–ó–∞–∫–æ–Ω –û–º–∞", content: "–°–≤—è–∑—å —Ç–æ–∫–∞, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è." }, back: { title: "I = U / R", formula: "$I = \\frac{U}{R}$", units: "$I$ = 1 –ê, $U$ = 1 –í, $R$ = 1 –û–º", vars: "$I$ - —Å–∏–ª–∞ —Ç–æ–∫–∞, $U$ - –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, $R$ - —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ", content: "–°–∏–ª–∞ —Ç–æ–∫–∞ –ø—Ä—è–º–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –∏ –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—é." }},
                        { front: { title: "–ó–∞–∫–æ–Ω –ö—É–ª–æ–Ω–∞", content: "–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Ç–æ—á–µ—á–Ω—ã—Ö –∑–∞—Ä—è–¥–æ–≤." }, back: { title: "–°–∏–ª–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∑–∞—Ä—è–¥–æ–≤", formula: "$F = k \\frac{|q_1 q_2|}{r^2}$", units: "$F$ = 1 –ù, $q_1, q_2$ = 1 –ö–ª, $r$ = 1 –º", vars: "$k$ - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç ($‚âà 9 \\times 10^9$ –ù¬∑–º¬≤/–ö–ª¬≤), $q_1, q_2$ - –∑–∞—Ä—è–¥—ã, $r$ - —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –Ω–∏–º–∏", content: "–°–∏–ª–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∑–∞—Ä—è–¥–∞–º–∏ –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∫–≤–∞–¥—Ä–∞—Ç—É —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –∏ –ø—Ä—è–º–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é –∑–∞—Ä—è–¥–æ–≤." }},
                        { front: { title: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ç–æ–∫", content: "–£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∑–∞—Ä—è–¥–æ–≤." }, back: { title: "–°–∏–ª–∞ —Ç–æ–∫–∞", formula: "$I = \\frac{\\Delta q}{\\Delta t}$", units: "$I$ = 1 –ê, $\\Delta q$ = 1 –ö–ª, $\\Delta t$ = 1 —Å", vars: "$\\Delta q$ - –∑–∞—Ä—è–¥, –ø—Ä–æ—à–µ–¥—à–∏–π —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–æ–¥–Ω–∏–∫, $\\Delta t$ - –≤—Ä–µ–º—è", content: "–°–∏–ª–∞ —Ç–æ–∫–∞ —Ä–∞–≤–Ω–∞ –∑–∞—Ä—è–¥—É, –ø—Ä–æ—à–µ–¥—à–µ–º—É —á–µ—Ä–µ–∑ –ø–æ–ø–µ—Ä–µ—á–Ω–æ–µ —Å–µ—á–µ–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–∞, –¥–µ–ª—ë–Ω–Ω–æ–º—É –Ω–∞ –≤—Ä–µ–º—è." }}
                    ],
                    problemsCards: [
                        { front: { title: "–ó–∞–¥–∞—á–∞: –°–∫–æ—Ä–æ—Å—Ç—å", content: "–ê–≤—Ç–æ–º–æ–±–∏–ª—å –ø—Ä–æ–µ—Ö–∞–ª 180 –∫–º –∑–∞ 2 —á–∞—Å–∞. –ö–∞–∫–æ–≤–∞ –µ–≥–æ —Å—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –∫–º/—á?" }, back: { content: "90", solution: "–°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ñ–æ—Ä–º—É–ª–æ–π:\n\n\\[ v_{—Å—Ä} = \\frac{S}{t} = \\frac{180}{2} = 90\\ \\frac{–∫–º}{—á} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –£—Å–∫–æ—Ä–µ–Ω–∏–µ", content: "–ü–æ–µ–∑–¥ –Ω–∞—á–∞–ª —Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ 72 –∫–º/—á –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è —á–µ—Ä–µ–∑ 20 —Å. –ù–∞–π—Ç–∏ –º–æ–¥—É–ª—å —É—Å–∫–æ—Ä–µ–Ω–∏—è (–≤ –º/—Å¬≤)." }, back: { content: "1", solution: "–ü–µ—Ä–µ–≤–µ–¥–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –≤ –º/—Å:\n\n\\[ v_0 = 72\\ \\frac{–∫–º}{—á} = \\frac{72 \\cdot 1000}{3600} = 20\\ \\frac{–º}{—Å} \\]\n\n–¢–æ–≥–¥–∞ —É—Å–∫–æ—Ä–µ–Ω–∏–µ:\n\n\\[ a = \\frac{v - v_0}{t} = \\frac{0 - 20}{20} = -1\\ \\frac{–º}{—Å^2} \\]\n\n–ú–æ–¥—É–ª—å —É—Å–∫–æ—Ä–µ–Ω–∏—è:\n\n\\[ |a| = 1\\ \\frac{–º}{—Å^2} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ", content: "–¢–µ–ª–æ –¥–≤–∏–∂–µ—Ç—Å—è —Å –Ω–∞—á–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é 5 –º/—Å –∏ —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º 2 –º/—Å¬≤. –ö–∞–∫–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ–Ω–æ –ø—Ä–æ–π–¥–µ—Ç –∑–∞ 4 —Å–µ–∫—É–Ω–¥—ã (–≤ –º)?" }, back: { content: "36", solution: "–§–æ—Ä–º—É–ª–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–≤–Ω–æ—É—Å–∫–æ—Ä–µ–Ω–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏:\n\n\\[ S = v_0 t + \\frac{a t^2}{2} \\]\n\n–ü–æ–¥—Å—Ç–∞–≤–∏–º –∑–Ω–∞—á–µ–Ω–∏—è:\n\n\\[ S = 5 \\cdot 4 + \\frac{2 \\cdot 4^2}{2} = 20 + \\frac{32}{2} = 20 + 16 = 36\\ \\text{–º} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: 2 –∑–∞–∫–æ–Ω –ù—å—é—Ç–æ–Ω–∞", content: "–¢–µ–ª–æ –º–∞—Å—Å–æ–π 5 –∫–≥ –¥–≤–∏–∂–µ—Ç—Å—è —Å —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º 3 –º/—Å¬≤. –ö–∞–∫–∞—è —Å–∏–ª–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ —Ç–µ–ª–æ (–≤ –ù)?" }, back: { content: "15", solution: "–°–∏–ª–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ –≤—Ç–æ—Ä–æ–º—É –∑–∞–∫–æ–Ω—É –ù—å—é—Ç–æ–Ω–∞:\n\n\\[ F = ma = 5\\ \\text{–∫–≥} \\cdot 3\\ \\frac{–º}{—Å^2} = 15\\ \\text{–ù} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –°–∏–ª–∞ —Ç—è–∂–µ—Å—Ç–∏", content: "–ö–∞–∫–æ–≤–∞ —Å–∏–ª–∞ —Ç—è–∂–µ—Å—Ç–∏, –¥–µ–π—Å—Ç–≤—É—é—â–∞—è –Ω–∞ —Ç–µ–ª–æ –º–∞—Å—Å–æ–π 15 –∫–≥ (g=10 –º/—Å¬≤) (–≤ –ù)?" }, back: { content: "150", solution: "–°–∏–ª–∞ —Ç—è–∂–µ—Å—Ç–∏:\n\n\\[ F_g = mg = 15\\ \\text{–∫–≥} \\cdot 10\\ \\frac{–º}{—Å^2} = 150\\ \\text{–ù} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –í–µ—Å", content: "–ö–∞–∫–æ–≤ –≤–µ—Å —Ç–µ–ª–∞ –º–∞—Å—Å–æ–π 8 –∫–≥, –ø–æ–∫–æ—è—â–µ–≥–æ—Å—è –Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ (g=10 –º/—Å¬≤) (–≤ –ù)?" }, back: { content: "80", solution: "–í —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–∫–æ—è –Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ–ø–æ—Ä–µ –≤–µ—Å $P$ —Ä–∞–≤–µ–Ω —Å–∏–ª–µ —Ç—è–∂–µ—Å—Ç–∏\n\n\\[ F_g = mg = 8 \\cdot 10 = 80\\ \\text{–ù} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –í—Å–µ–º–∏—Ä–Ω–æ–µ —Ç—è–≥–æ—Ç–µ–Ω–∏–µ", content: "–ú–∞—Å—Å–∞ –õ—É–Ω—ã –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ 81 —Ä–∞–∑ –º–µ–Ω—å—à–µ –º–∞—Å—Å—ã –ó–µ–º–ª–∏, –∞ —Ä–∞–¥–∏—É—Å –õ—É–Ω—ã –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ 3.7 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ —Ä–∞–¥–∏—É—Å–∞ –ó–µ–º–ª–∏. –í–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è –Ω–∞ –õ—É–Ω–µ –º–µ–Ω—å—à–µ, —á–µ–º –Ω–∞ –ó–µ–º–ª–µ?" }, back: { content: "6", solution: "–£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ:\n\n\\[ g = \\frac{GM}{R^2} \\]\n\n–¢–æ–≥–¥–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ —É—Å–∫–æ—Ä–µ–Ω–∏–π –Ω–∞ –õ—É–Ω–µ –∏ –ó–µ–º–ª–µ:\n\n\\[ \\frac{g_{\\text{–õ}}}{g_{\\text{–ó}}} = \\frac{M_{\\text{–õ}}}{M_{\\text{–ó}}} : \\left( \\frac{R_{\\text{–õ}}}{R_{\\text{–ó}}} \\right)^2 = \\frac{1}{81} : \\left( \\frac{1}{3.7} \\right)^2 = \\frac{13.69}{81} \\approx \\frac{1}{6} \\]\n\n–£—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–∞ –õ—É–Ω–µ –º–µ–Ω—å—à–µ –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ 6 —Ä–∞–∑." } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –ò–º–ø—É–ª—å—Å —Ç–µ–ª–∞", content: "–¢–µ–ª–æ –º–∞—Å—Å–æ–π 0.5 –∫–≥ –¥–≤–∏–∂–µ—Ç—Å—è —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é 8 –º/—Å. –ß–µ–º—É —Ä–∞–≤–µ–Ω –∏–º–ø—É–ª—å—Å —Ç–µ–ª–∞ (–≤ –∫–≥¬∑–º/—Å)?" }, back: { content: "4", solution: "–ò–º–ø—É–ª—å—Å —Ç–µ–ª–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ:\n\n\\[ p = mv = 0.5\\ \\text{–∫–≥} \\cdot 8\\ \\frac{–º}{—Å} = 4\\ \\text{–∫–≥¬∑–º/—Å} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –ò–º–ø—É–ª—å—Å —Å–∏–ª—ã", content: "–°–∏–ª–∞ 10 –ù –¥–µ–π—Å—Ç–≤–æ–≤–∞–ª–∞ –Ω–∞ —Ç–µ–ª–æ 3 —Å. –ù–∞ —Å–∫–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏–ª—Å—è –∏–º–ø—É–ª—å—Å —Ç–µ–ª–∞ (–≤ –∫–≥¬∑–º/—Å)?" }, back: { content: "30", solution: "–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–ø—É–ª—å—Å–∞ —Ç–µ–ª–∞ —Ä–∞–≤–Ω–æ –∏–º–ø—É–ª—å—Å—É —Å–∏–ª—ã:\n\n\\[ \\Delta p = F \\Delta t = 10\\ \\text{–ù} \\cdot 3\\ \\text{—Å} = 30\\ \\text{–ù¬∑—Å} = 30\\ \\text{–∫–≥¬∑–º/—Å} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –ó–∞–∫–æ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–ø—É–ª—å—Å–∞", content: "–î–≤–∞ –ø–ª–∞—Å—Ç–∏–ª–∏–Ω–æ–≤—ã—Ö —à–∞—Ä–∞ –º–∞—Å—Å–∞–º–∏ 6 –∫–≥ –∏ 4 –∫–≥ –ª–µ—Ç—è—Ç –Ω–∞–≤—Å—Ç—Ä–µ—á—É –¥—Ä—É–≥ –¥—Ä—É–≥—É —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—è–º–∏ 3 –º/—Å –∏ 2 –º/—Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –ö–∞–∫–æ–≤ –º–æ–¥—É–ª—å –∏—Ö —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ—É–ø—Ä—É–≥–æ–≥–æ —É–¥–∞—Ä–∞ (–≤ –º/—Å)?" }, back: { content: "1", solution: "–û—Å—å X –Ω–∞–ø—Ä–∞–≤–∏–º –≤–ø—Ä–∞–≤–æ. –ü—É—Å—Ç—å —à–∞—Ä –º–∞—Å—Å–æ–π 6 –∫–≥ –¥–≤–∏–∂–µ—Ç—Å—è –≤–ø—Ä–∞–≤–æ —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é 3 –º/—Å, –∞ —à–∞—Ä –º–∞—Å—Å–æ–π 4 –∫–≥ ‚Äî –≤–ª–µ–≤–æ —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é 2 –º/—Å.\n\n–ò–º–ø—É–ª—å—Å –ø–µ—Ä–≤–æ–≥–æ —à–∞—Ä–∞:\n\n\\[ p_1 = m_1 v_1 = 6 \\cdot 3 = 18\\ \\text{–∫–≥¬∑–º/—Å} \\]\n\n–ò–º–ø—É–ª—å—Å –≤—Ç–æ—Ä–æ–≥–æ —à–∞—Ä–∞:\n\n\\[ p_2 = m_2 v_2 = 4 \\cdot (-2) = -8\\ \\text{–∫–≥¬∑–º/—Å} \\]\n\n–°—É–º–º–∞—Ä–Ω—ã–π –∏–º–ø—É–ª—å—Å –¥–æ —É–¥–∞—Ä–∞:\n\n\\[ p_{\\text{–¥–æ}} = 18 - 8 = 10\\ \\text{–∫–≥¬∑–º/—Å} \\]\n\n–ü–æ—Å–ª–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ—É–ø—Ä—É–≥–æ–≥–æ —É–¥–∞—Ä–∞ —à–∞—Ä—ã —Å–ª–∏–ø–∞—é—Ç—Å—è, –∏ –∏—Ö –æ–±—â–∞—è –º–∞—Å—Å–∞ $m = 6 + 4 = 10$ –∫–≥. –ü—É—Å—Ç—å –æ–±—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ—Å–ª–µ —É–¥–∞—Ä–∞ ‚Äî $v$.\n\n–ü–æ –∑–∞–∫–æ–Ω—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–ø—É–ª—å—Å–∞:\n\n\\[ p_{\\text{–¥–æ}} = p_{\\text{–ø–æ—Å–ª–µ}} \\Rightarrow 10 = 10v \\Rightarrow v = 1\\ \\frac{–º}{—Å} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –†–∞–±–æ—Ç–∞", content: "–°–∏–ª–∞ 20 –ù –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∞ —Ç–µ–ª–æ –Ω–∞ 5 –º –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Å–∏–ª—ã. –ö–∞–∫–∞—è —Ä–∞–±–æ—Ç–∞ —Å–æ–≤–µ—Ä—à–µ–Ω–∞ (–≤ –î–∂)?" }, back: { content: "100", solution: "$A = F s \\cos(0^\circ) = 20\\ \\text{–ù} \\cdot 5\\ \\text{–º} \\cdot 1 = 100\\ \\text{–î–∂}$" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è", content: "–¢–µ–ª–æ –º–∞—Å—Å–æ–π 4 –∫–≥ –¥–≤–∏–∂–µ—Ç—Å—è —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é 10 –º/—Å. –ö–∞–∫–æ–≤–∞ –µ–≥–æ –∫–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è (–≤ –î–∂)?" }, back: { content: "200", solution: "–ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è —Ç–µ–ª–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ:\n\n\\[ E_k = \\frac{mv^2}{2} = \\frac{4 \\cdot 10^2}{2} = 200\\ \\text{–î–∂} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è", content: "–¢–µ–ª–æ –º–∞—Å—Å–æ–π 2 –∫–≥ –ø–æ–¥–Ω—è—Ç–æ –Ω–∞ –≤—ã—Å–æ—Ç—É 5 –º. –ö–∞–∫–æ–≤–∞ –µ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è (g=10 –º/—Å¬≤) (–≤ –î–∂)?" }, back: { content: "100", solution: "–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ:\n\n\\[ E_p = mgh = 2 \\cdot 10 \\cdot 5 = 100\\ \\text{–î–∂} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –ó–∞–∫–æ–Ω –û–º–∞", content: "–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∑–∏—Å—Ç–æ—Ä–µ 12 –í, —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ 3 –û–º. –ö–∞–∫–æ–≤–∞ —Å–∏–ª–∞ —Ç–æ–∫–∞ (–≤ –ê)?" }, back: { content: "4", solution: "–°–∏–ª–∞ —Ç–æ–∫–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ –∑–∞–∫–æ–Ω—É –û–º–∞:\n\n\\[ I = \\frac{U}{R} = \\frac{12}{3} = 4\\ \\text{–ê} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –ú–æ—â–Ω–æ—Å—Ç—å —Ç–æ–∫–∞", content: "–°–∏–ª–∞ —Ç–æ–∫–∞ –≤ –ª–∞–º–ø–µ 0.5 –ê, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ 220 –í. –ö–∞–∫–æ–≤–∞ –º–æ—â–Ω–æ—Å—Ç—å –ª–∞–º–ø—ã (–≤ –í—Ç)?" }, back: { content: "110", solution: "–ú–æ—â–Ω–æ—Å—Ç—å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ:\n\n\\[ P = UI = 220 \\cdot 0.5 = 110\\ \\text{–í—Ç} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –ó–∞–∫–æ–Ω –ö—É–ª–æ–Ω–∞", content: "–í–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏–∑–º–µ–Ω–∏—Ç—Å—è —Å–∏–ª–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–≤—É—Ö –∑–∞—Ä—è–¥–æ–≤, –µ—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –Ω–∏–º–∏ —É–º–µ–Ω—å—à–∏—Ç—å –≤ 2 —Ä–∞–∑–∞?" }, back: { content: "4", solution: "–°–∏–ª–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∑–∞—Ä—è–¥–∞–º–∏ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∫–≤–∞–¥—Ä–∞—Ç—É —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏:\n\n\\[ F \\sim \\frac{1}{r^2} \\]\n\n–ï—Å–ª–∏ $r$ —É–º–µ–Ω—å—à–∏—Ç—å –≤ 2 —Ä–∞–∑–∞, —Ç–æ $r^2$ —É–º–µ–Ω—å—à–∏—Ç—Å—è –≤ 4 —Ä–∞–∑–∞. –°–∏–ª–∞ —É–≤–µ–ª–∏—á–∏—Ç—Å—è –≤ 4 —Ä–∞–∑–∞." } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–ø–ª–æ—Ç—ã", content: "–£–¥–µ–ª—å–Ω–∞—è —Ç–µ–ø–ª–æ–µ–º–∫–æ—Å—Ç—å –≤–æ–¥—ã 4200 –î–∂/(–∫–≥¬∑¬∞C). –°–∫–æ–ª—å–∫–æ —Ç–µ–ø–ª–æ—Ç—ã (–≤ –∫–î–∂) –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–∞–≥—Ä–µ—Ç—å 0.5 –∫–≥ –≤–æ–¥—ã –Ω–∞ 20 ¬∞C?" }, back: { content: "42", solution: "–¢–µ–ø–ª–æ—Ç–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ:\n\n\\[ Q = cm\\Delta T = 4200 \\cdot 0.5 \\cdot 20 = 42000\\ \\text{–î–∂} = 42\\ \\text{–∫–î–∂} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π –∑–∞—Ä—è–¥", content: "–ß–µ—Ä–µ–∑ –ø—Ä–æ–≤–æ–¥–Ω–∏–∫ –∑–∞ 1 –º–∏–Ω—É—Ç—É –ø—Ä–æ—à–µ–ª –∑–∞—Ä—è–¥ 120 –ö–ª. –ö–∞–∫–æ–≤–∞ —Å–∏–ª–∞ —Ç–æ–∫–∞ –≤ –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–µ (–≤ –ê)?" }, back: { content: "2", solution: "–í—Ä–µ–º—è $t = 1\\ \\text{–º–∏–Ω} = 60\\ \\text{—Å}$. –°–∏–ª–∞ —Ç–æ–∫–∞:\n\n\\[ I = \\frac{\\Delta q}{\\Delta t} = \\frac{120}{60} = 2\\ \\text{–ê} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –ß–∞—Å—Ç–æ—Ç–∞", content: "–¢–µ–ª–æ —Å–æ–≤–µ—Ä—à–∏–ª–æ 50 –∫–æ–ª–µ–±–∞–Ω–∏–π –∑–∞ 10 —Å–µ–∫—É–Ω–¥. –ö–∞–∫–æ–≤–∞ —á–∞—Å—Ç–æ—Ç–∞ –∫–æ–ª–µ–±–∞–Ω–∏–π (–≤ –ì—Ü)?" }, back: { content: "5", solution: "–ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–ª–µ–±–∞–Ω–∏–π:\n\n\\[ f = \\frac{N}{t} = \\frac{50}{10} = 5\\ \\text{–ì—Ü} \\]" } },
                        { front: { title: "–ó–∞–¥–∞—á–∞: –î–ª–∏–Ω–∞ –≤–æ–ª–Ω—ã", content: "–°–∫–æ—Ä–æ—Å—Ç—å –∑–≤—É–∫–∞ –≤ –≤–æ–∑–¥—É—Ö–µ 340 –º/—Å. –ö–∞–∫–æ–≤–∞ –¥–ª–∏–Ω–∞ –≤–æ–ª–Ω—ã –∑–≤—É–∫–∞ —á–∞—Å—Ç–æ—Ç–æ–π 170 –ì—Ü (–≤ –º)?" }, back: { content: "2", solution: "–î–ª–∏–Ω–∞ –≤–æ–ª–Ω—ã –∑–≤—É–∫–∞:\n\n\\[ \\lambda = \\frac{v}{f} = \\frac{340}{170} = 2\\ \\text{–º} \\]" } }    
                    ]
                },
                en: {
                    title: 'Physics: Basics',
                    description: 'Learn terms and solve problems',
                    deckType: 'combined',
                    termsCards: [
                        { front: { title: "Newton's First Law", content: "State the law of inertia."}, back: { title: "Law of Inertia", formula:"$\\vec{F} = 0 \\implies \\vec{v} = const$", units:"Velocity (m/s)", vars:"$\\vec{F}$ - net force, $\\vec{v}$ - velocity", content: "In an inertial frame of reference, an object either remains at rest or continues to move at a constant velocity, unless acted upon by a net force."}},
                        { front: { title: "Newton's Second Law", content: "Fundamental law of dynamics."}, back: { title: "F = ma", formula:"$\\vec{F} = m\\vec{a}$", units:"Force (N), mass (kg), acceleration (m/s¬≤)", vars:"$\\vec{F}$ - net force, m - mass, $\\vec{a}$ - acceleration", content: "The acceleration of an object is directly proportional to the net force acting on it and inversely proportional to its mass."}},
                        { front: { title: "Newton's Third Law", content: "Law of interaction."}, back: { title: "Action = Reaction", formula:"$\\vec{F}_{1} = -\\vec{F}_{2}$", units:"Force (N)", vars:"$\\vec{F}_{1}$ - force exerted by body 2 on body 1", content: "For every action, there is an equal and opposite reaction. Forces come in pairs."}},
                        { front: { title: "Law of Universal Gravitation", content: "How do masses interact?"}, back: { title: "Gravity", formula:"$F = G \\frac{m_1 m_2}{r^2}$", units:"Force (N), mass (kg), distance (m)", vars:"G - gravitational constant ($‚âà 6.67 \\times 10^{-11}$ N¬∑m¬≤/kg¬≤), $m_1, m_2$ - masses, r - distance", content: "Every particle attracts every other particle in the universe with a force proportional to the product of their masses and inversely proportional to the square of the distance between their centers."}},
                        { front: { title: "Weight", content: "Force exerted on a support."}, back: { title: "W = mg (at rest)", formula:"$\\vec{W} = m(\\vec{g} - \\vec{a})$", units:"Weight (N), mass (kg), acceleration (m/s¬≤)", vars:"m - mass, $\\vec{g}$ - acceleration due to gravity, $\\vec{a}$ - acceleration of support/suspension", content: "The force exerted on a support or suspension by an object due to gravity. Not to be confused with mass!"}},
                        { front: { title: "Momentum", content: "Measure of motion."}, back: { title: "Quantity of motion", formula:"$\\vec{p} = m\\vec{v}$", units:"kg¬∑m/s", vars:"m - mass, $\\vec{v}$ - velocity", content: "A vector quantity defined as the product of an object's mass and velocity."}},
                        { front: { title: "Impulse", content: "Measure of force's effect over time."}, back: { title: "Change in momentum", formula:"$\\Delta \\vec{p} = \\vec{F} \\Delta t$", units:"N¬∑s or kg¬∑m/s", vars:"$\\vec{F}$ - force, $\\Delta t$ - time interval", content: "The product of the force and the time interval over which it acts, equal to the change in momentum of the object."}},
                        { front: { title: "Conservation of Momentum", content: "What is conserved in a closed system?"}, back: { title: "Total momentum", formula:"$\\sum \\vec{p}_{initial} = \\sum \\vec{p}_{final}$", units:"kg¬∑m/s", vars:"$\\vec{p}$ - momentum", content: "In a closed system, the total momentum remains constant, regardless of the interactions between the objects within the system."}},
                        { front: { title: "Kinetic Energy", content: "Energy of a moving object."}, back: { title: "Energy of motion", formula:"$E_k = \\frac{mv^2}{2}$", units:"Joule (J)", vars:"m - mass (kg), v - speed (m/s)", content: "The energy possessed by an object due to its motion."}},
                        { front: { title: "Potential Energy (Gravitational)", content: "Energy due to position in a gravitational field."}, back: { title: "Energy of interaction", formula:"$E_p = mgh$", units:"Joule (J)", vars:"m - mass (kg), g - acceleration due to gravity (m/s¬≤), h - height (m)", content: "Energy stored by an object as the result of its vertical position or height."}},
                        { front: { title: "Conservation of Energy", content: "Fundamental law of nature."}, back: { title: "Total mechanical energy", formula:"$E_k + E_p = const$ (for isolated conservative system)", units:"Joule (J)", vars:"$E_k$ - kinetic energy, $E_p$ - potential energy", content: "The total mechanical energy of an isolated system remains constant if only conservative forces are doing work."}},
                        { front: { title: "Wavelength", content: "Distance between crests."}, back: { title: "Œª", formula:"$\\lambda = vT = \\frac{v}{f}$", units:"meter (m)", vars:"v - wave speed (m/s), T - period (s), f - frequency (Hz)", content: "The spatial period of a periodic wave ‚Äì the distance over which the wave's shape repeats."}},
                        { front: { title: "Frequency", content: "How often do oscillations occur?"}, back: { title: "f or ŒΩ", formula:"$f = \\frac{1}{T}$", units:"Hertz (Hz)", vars:"T - period (s)", content: "The number of occurrences of a repeating event per unit of time."}},
                        { front: { title: "Speed of Light in Vacuum", content: "The ultimate speed limit."}, back: { title: "c", formula:"$c \\approx 3 \\times 10^8$ m/s", units:"m/s", vars:"c - speed of light", content: "A fundamental physical constant, the maximum speed at which all conventional matter and hence all known forms of information in the universe can travel."}},
                        { front: { title: "Power", content: "Rate of doing work."}, back: { title: "P", formula:"$P = \\frac{W}{t} = Fv \\cos(\\alpha)$", units:"Watt (W)", vars:"W - work (J), t - time (s), F - force (N), v - velocity (m/s)", content: "The rate at which work is performed or energy is converted."}},
                        { front: { title: "Work (by a force)", content: "Measure of energy transfer by force."}, back: { title: "W", formula:"$W = Fs \\cos(\\alpha)$", units:"Joule (J)", vars:"F - force (N), s - displacement (m), Œ± - angle between F and s", content: "The energy transferred when a force moves an object over a distance."}},
                        { front: { title: "Heat Balance Equation", content: "Heat exchange in an isolated system."}, back: { title: "Q_lost + Q_gained = 0", formula:"$\\sum Q_i = 0$", units:"Joule (J)", vars:"Q - amount of heat transferred", content: "In an isolated system, the sum of heat lost by hotter objects equals the sum of heat gained by colder objects."}},
                        { front: { title: "Ohm's Law", content: "Relation between current, voltage, resistance."}, back: { title: "I = V / R", formula:"$I = \\frac{V}{R}$", units:"Current (A), Voltage (V), Resistance (Œ©)", vars:"I - current, V - voltage, R - resistance", content: "The current through a conductor is directly proportional to the voltage across it and inversely proportional to its resistance."}},
                        { front: { title: "Coulomb's Law", content: "Interaction of point charges."}, back: { title: "Electrostatic Force", formula:"$F = k \\frac{|q_1 q_2|}{r^2}$", units:"Force (N), charge (C), distance (m)", vars:"k - Coulomb constant ($‚âà 9 \\times 10^9$ N¬∑m¬≤/C¬≤), $q_1, q_2$ - charges, r - distance", content: "The magnitude of the electrostatic force of attraction or repulsion between two point charges is directly proportional to the product of the magnitudes of charges and inversely proportional to the square of the distance between them."}},
                        { front: { title: "Electric Current", content: "Ordered flow of charge."}, back: { title: "Current Intensity", formula:"$I = \\frac{\\Delta q}{\\Delta t}$", units:"Ampere (A)", vars:"$\\Delta q$ - charge (C) passing through a cross-section, $\\Delta t$ - time (s)", content: "A flow of electric charge. Current intensity is the rate at which charge flows past a point."}}
                    ],
                    problemsCards: [
                        { front: { title: "Problem: Speed", content: "A car traveled 180 km in 2 hours. What is its average speed in km/h?" }, back: { content: "90", solution: "Average speed is calculated as:\n\n\\[ v_{avg} = \\frac{Distance}{Time} = \\frac{180\\ km}{2\\ h} = 90\\ km/h \\]" } },
                        { front: { title: "Problem: Acceleration", content: "A train starts braking at 72 km/h and stops in 20 s. Find the magnitude of acceleration (in m/s¬≤)." }, back: { content: "1", solution: "Convert speed to m/s:\n\n\\[ v_0 = 72\\ km/h = \\frac{72 \\times 1000}{3600} = 20\\ m/s \\]\n\nAcceleration:\n\n\\[ a = \\frac{v - v_0}{t} = \\frac{0 - 20}{20} = -1\\ m/s^2 \\]\n\nMagnitude:\n\n\\[ |a| = 1\\ m/s^2 \\]" } },
                        { front: { title: "Problem: Displacement", content: "An object moves with an initial velocity of 5 m/s and acceleration of 2 m/s¬≤. What distance does it cover in 4 seconds (in m)?" }, back: { content: "36", solution: "Displacement formula for constant acceleration:\n\n\\[ S = v_0 t + \\frac{a t^2}{2} \\]\n\nSubstitute values:\n\n\\[ S = 5 \\cdot 4 + \\frac{2 \\cdot 4^2}{2} = 20 + \\frac{32}{2} = 20 + 16 = 36\\ m \\]" } },
                        { front: { title: "Problem: Newton's 2nd Law", content: "A body of mass 5 kg moves with an acceleration of 3 m/s¬≤. What force acts on the body (in N)?" }, back: { content: "15", solution: "Force is calculated using Newton's second law:\n\n\\[ F = ma = 5\\ kg \\cdot 3\\ m/s^2 = 15\\ N \\]" } },
                        { front: { title: "Problem: Gravity Force", content: "What is the force of gravity acting on a 15 kg body (g=10 m/s¬≤) (in N)?" }, back: { content: "150", solution: "Force of gravity:\n\n\\[ F_g = mg = 15\\ kg \\cdot 10\\ m/s^2 = 150\\ N \\]" } },
                        { front: { title: "Problem: Weight", content: "What is the weight of an 8 kg body resting on a horizontal surface (g=10 m/s¬≤) (in N)?" }, back: { content: "80", solution: "At rest on a horizontal surface, weight $W$ equals the force of gravity:\n\n\\[ F_g = mg = 8 \\cdot 10 = 80\\ N \\]" } },
                        { front: { title: "Problem: Universal Gravitation", content: "The Moon's mass is about 81 times less than Earth's mass, and the Moon's radius is about 3.7 times smaller than Earth's radius. How many times smaller is the acceleration due to gravity on the Moon compared to Earth?" }, back: { content: "6", solution: "Acceleration due to gravity:\n\n\\[ g = \\frac{GM}{R^2} \\]\n\nRatio of accelerations on Moon and Earth:\n\n\\[ \\frac{g_{M}}{g_{E}} = \\frac{M_{M}}{M_{E}} \\div \\left( \\frac{R_{M}}{R_{E}} \\right)^2 = \\frac{1}{81} \\div \\left( \\frac{1}{3.7} \\right)^2 \\approx \\frac{1}{81} \\div \\frac{1}{13.69} = \\frac{13.69}{81} \\approx \\frac{1}{6} \\]\n\nAcceleration on the Moon is about 6 times smaller." } },
                        { front: { title: "Problem: Momentum", content: "A 0.5 kg body moves at a speed of 8 m/s. What is its momentum (in kg¬∑m/s)?" }, back: { content: "4", solution: "Momentum is calculated as:\n\n\\[ p = mv = 0.5\\ kg \\cdot 8\\ m/s = 4\\ kg\\cdot m/s \\]" } },
                        { front: { title: "Problem: Impulse", content: "A force of 10 N acted on a body for 3 s. By how much did the body's momentum change (in kg¬∑m/s)?" }, back: { content: "30", solution: "Change in momentum equals the impulse of the force:\n\n\\[ \\Delta p = F \\Delta t = 10\\ N \\cdot 3\\ s = 30\\ N\\cdot s = 30\\ kg\\cdot m/s \\]" } },
                        { front: { title: "Problem: Conservation of Momentum", content: "Two clay balls with masses 6 kg and 4 kg move towards each other at speeds of 3 m/s and 2 m/s, respectively. What is the magnitude of their velocity after a perfectly inelastic collision (in m/s)?" }, back: { content: "1", solution: "Let the X-axis point right. The 6 kg ball moves right (v1=3), the 4 kg ball moves left (v2=-2).\n\nInitial momentum:\n\n\\[ p_1 = m_1 v_1 = 6 \\cdot 3 = 18 \\]\n\\[ p_2 = m_2 v_2 = 4 \\cdot (-2) = -8 \\]\n\nTotal initial momentum:\n\n\\[ p_{initial} = 18 - 8 = 10\\ kg\\cdot m/s \\]\n\nAfter collision, total mass $m = 6 + 4 = 10$ kg. Let final velocity be $v$.\n\nConservation of momentum:\n\n\\[ p_{initial} = p_{final} \\Rightarrow 10 = 10v \\Rightarrow v = 1\\ m/s \\]" } },
                        { front: { title: "Problem: Work", content: "A force of 20 N moved a body 5 m in the direction of the force. What work was done (in J)?" }, back: { content: "100", solution: "$W = F s \\cos(0^\circ) = 20\\ N \\cdot 5\\ m \\cdot 1 = 100\\ J$" } },
                        { front: { title: "Problem: Kinetic Energy", content: "A body of mass 4 kg moves at a speed of 10 m/s. What is its kinetic energy (in J)?" }, back: { content: "200", solution: "Kinetic energy is calculated as:\n\n\\[ E_k = \\frac{mv^2}{2} = \\frac{4 \\cdot 10^2}{2} = 200\\ J \\]" } },
                        { front: { title: "Problem: Potential Energy", content: "A body of mass 2 kg is lifted to a height of 5 m. What is its potential energy (g=10 m/s¬≤) (in J)?" }, back: { content: "100", solution: "Potential energy is calculated as:\n\n\\[ E_p = mgh = 2 \\cdot 10 \\cdot 5 = 100\\ J \\]" } },
                        { front: { title: "Problem: Ohm's Law", content: "The voltage across a resistor is 12 V, its resistance is 3 Œ©. What is the current (in A)?" }, back: { content: "4", solution: "Current is calculated using Ohm's law:\n\n\\[ I = \\frac{V}{R} = \\frac{12\\ V}{3\\ \\Omega} = 4\\ A \\]" } },
                        { front: { title: "Problem: Electric Power", content: "The current in a lamp is 0.5 A, the voltage is 220 V. What is the power of the lamp (in W)?" }, back: { content: "110", solution: "Power is calculated as:\n\n\\[ P = VI = 220\\ V \\cdot 0.5\\ A = 110\\ W \\]" } },
                        { front: { title: "Problem: Coulomb's Law", content: "How many times does the interaction force between two charges change if the distance between them is halved?" }, back: { content: "4", solution: "Interaction force is inversely proportional to the square of the distance:\n\n\\[ F \\sim \\frac{1}{r^2} \\]\n\nIf $r$ is halved, $r^2$ decreases by a factor of 4. The force increases by a factor of 4." } },
                        { front: { title: "Problem: Heat Quantity", content: "Specific heat capacity of water is 4200 J/(kg¬∑¬∞C). How much heat (in kJ) is needed to heat 0.5 kg of water by 20 ¬∞C?" }, back: { content: "42", solution: "Heat is calculated as:\n\n\\[ Q = cm\\Delta T = 4200 \\cdot 0.5 \\cdot 20 = 42000\\ J = 42\\ kJ \\]" } },
                        { front: { title: "Problem: Electric Charge", content: "A charge of 120 C passed through a conductor in 1 minute. What is the current in the conductor (in A)?" }, back: { content: "2", solution: "Time $t = 1\\ min = 60\\ s$. Current:\n\n\\[ I = \\frac{\\Delta q}{\\Delta t} = \\frac{120\\ C}{60\\ s} = 2\\ A \\]" } },
                        { front: { title: "Problem: Frequency", content: "An object made 50 oscillations in 10 seconds. What is the frequency of oscillations (in Hz)?" }, back: { content: "5", solution: "Frequency:\n\n\\[ f = \\frac{N}{t} = \\frac{50}{10} = 5\\ Hz \\]" } },
                        { front: { title: "Problem: Wavelength", content: "The speed of sound in air is 340 m/s. What is the wavelength of sound with a frequency of 170 Hz (in m)?" }, back: { content: "2", solution: "Wavelength:\n\n\\[ \\lambda = \\frac{v}{f} = \\frac{340\\ m/s}{170\\ Hz} = 2\\ m \\]" } }
                    ]
                },
                es: {
                    title: 'F√≠sica: Fundamentos',
                    description: 'Aprende t√©rminos y resuelve problemas',
                    deckType: 'combined',
                    termsCards: [
                        { front: { title: "Primera Ley de Newton", content: "Enuncia la ley de inercia."}, back: { title: "Ley de Inercia", formula:"$\\vec{F} = 0 \\implies \\vec{v} = const$", units:"Velocidad (m/s)", vars:"$\\vec{F}$ - fuerza neta, $\\vec{v}$ - velocidad", content: "En un marco de referencia inercial, un objeto permanece en reposo o contin√∫a movi√©ndose a velocidad constante, a menos que act√∫e sobre √©l una fuerza neta."}},
                        { front: { title: "Segunda Ley de Newton", content: "Ley fundamental de la din√°mica."}, back: { title: "F = ma", formula:"$\\vec{F} = m\\vec{a}$", units:"Fuerza (N), masa (kg), aceleraci√≥n (m/s¬≤)", vars:"$\\vec{F}$ - fuerza neta, m - masa, $\\vec{a}$ - aceleraci√≥n", content: "La aceleraci√≥n de un objeto es directamente proporcional a la fuerza neta que act√∫a sobre √©l e inversamente proporcional a su masa."}},
                        { front: { title: "Tercera Ley de Newton", content: "Ley de interacci√≥n."}, back: { title: "Acci√≥n = Reacci√≥n", formula:"$\\vec{F}_{1} = -\\vec{F}_{2}$", units:"Fuerza (N)", vars:"$\\vec{F}_{1}$ - fuerza ejercida por el cuerpo 2 sobre el cuerpo 1", content: "A toda acci√≥n corresponde una reacci√≥n igual y opuesta. Las fuerzas siempre ocurren en pares."}},
                        { front: { title: "Ley de Gravitaci√≥n Universal", content: "¬øC√≥mo interact√∫an las masas?"}, back: { title: "Gravedad", formula:"$F = G \\frac{m_1 m_2}{r^2}$", units:"Fuerza (N), masa (kg), distancia (m)", vars:"G - constante gravitacional ($‚âà 6.67 \\times 10^{-11}$ N¬∑m¬≤/kg¬≤), $m_1, m_2$ - masas, r - distancia", content: "Toda part√≠cula en el universo atrae a toda otra part√≠cula con una fuerza que es directamente proporcional al producto de sus masas e inversamente proporcional al cuadrado de la distancia entre sus centros."}},
                        { front: { title: "Peso", content: "Fuerza ejercida sobre un soporte."}, back: { title: "P = mg (en reposo)", formula:"$\\vec{P} = m(\\vec{g} - \\vec{a})$", units:"Peso (N), masa (kg), aceleraci√≥n (m/s¬≤)", vars:"m - masa, $\\vec{g}$ - aceleraci√≥n debida a la gravedad, $\\vec{a}$ - aceleraci√≥n del soporte/suspensi√≥n", content: "La fuerza ejercida sobre un soporte o suspensi√≥n por un objeto debido a la gravedad. ¬°No confundir con masa!"}},
                        { front: { title: "Momento Lineal (Cantidad de Movimiento)", content: "Medida del movimiento."}, back: { title: "Cantidad de movimiento", formula:"$\\vec{p} = m\\vec{v}$", units:"kg¬∑m/s", vars:"m - masa, $\\vec{v}$ - velocidad", content: "Una cantidad vectorial definida como el producto de la masa y la velocidad de un objeto."}},
                        { front: { title: "Impulso", content: "Medida del efecto de una fuerza en el tiempo."}, back: { title: "Cambio en el momento", formula:"$\\Delta \\vec{p} = \\vec{F} \\Delta t$", units:"N¬∑s o kg¬∑m/s", vars:"$\\vec{F}$ - fuerza, $\\Delta t$ - intervalo de tiempo", content: "El producto de la fuerza y el intervalo de tiempo durante el cual act√∫a, igual al cambio en el momento lineal del objeto."}},
                        { front: { title: "Conservaci√≥n del Momento Lineal", content: "¬øQu√© se conserva en un sistema cerrado?"}, back: { title: "Momento total", formula:"$\\sum \\vec{p}_{inicial} = \\sum \\vec{p}_{final}$", units:"kg¬∑m/s", vars:"$\\vec{p}$ - momento lineal", content: "En un sistema cerrado (aislado), el momento lineal total permanece constante, independientemente de las interacciones entre los objetos dentro del sistema."}},
                        { front: { title: "Energ√≠a Cin√©tica", content: "Energ√≠a de un objeto en movimiento."}, back: { title: "Energ√≠a de movimiento", formula:"$E_k = \\frac{mv^2}{2}$", units:"Julio (J)", vars:"m - masa (kg), v - rapidez (m/s)", content: "La energ√≠a que posee un objeto debido a su movimiento."}},
                        { front: { title: "Energ√≠a Potencial (Gravitatoria)", content: "Energ√≠a debida a la posici√≥n en un campo gravitatorio."}, back: { title: "Energ√≠a de interacci√≥n", formula:"$E_p = mgh$", units:"Julio (J)", vars:"m - masa (kg), g - aceleraci√≥n debida a la gravedad (m/s¬≤), h - altura (m)", content: "Energ√≠a almacenada por un objeto como resultado de su posici√≥n vertical o altura."}},
                        { front: { title: "Conservaci√≥n de la Energ√≠a", content: "Ley fundamental de la naturaleza."}, back: { title: "Energ√≠a mec√°nica total", formula:"$E_k + E_p = const$ (para sistema conservativo aislado)", units:"Julio (J)", vars:"$E_k$ - energ√≠a cin√©tica, $E_p$ - energ√≠a potencial", content: "La energ√≠a mec√°nica total de un sistema aislado permanece constante si solo las fuerzas conservativas realizan trabajo."}},
                        { front: { title: "Longitud de Onda", content: "Distancia entre crestas."}, back: { title: "Œª", formula:"$\\lambda = vT = \\frac{v}{f}$", units:"metro (m)", vars:"v - velocidad de la onda (m/s), T - per√≠odo (s), f - frecuencia (Hz)", content: "El per√≠odo espacial de una onda peri√≥dica ‚Äì la distancia sobre la cual la forma de la onda se repite."}},
                        { front: { title: "Frecuencia", content: "¬øCon qu√© frecuencia ocurren las oscilaciones?"}, back: { title: "f o ŒΩ", formula:"$f = \\frac{1}{T}$", units:"Hertz (Hz)", vars:"T - per√≠odo (s)", content: "El n√∫mero de ocurrencias de un evento repetitivo por unidad de tiempo."}},
                        { front: { title: "Velocidad de la Luz en el Vac√≠o", content: "El l√≠mite de velocidad √∫ltimo."}, back: { title: "c", formula:"$c \\approx 3 \\times 10^8$ m/s", units:"m/s", vars:"c - velocidad de la luz", content: "Una constante f√≠sica fundamental, la velocidad m√°xima a la que toda la materia convencional y, por lo tanto, todas las formas conocidas de informaci√≥n en el universo pueden viajar."}},
                        { front: { title: "Potencia", content: "Ritmo de realizaci√≥n de trabajo."}, back: { title: "P", formula:"$P = \\frac{W}{t} = Fv \\cos(\\alpha)$", units:"Watt (W)", vars:"W - trabajo (J), t - tiempo (s), F - fuerza (N), v - velocidad (m/s)", content: "La tasa a la que se realiza el trabajo o se convierte la energ√≠a."}},
                        { front: { title: "Trabajo (por una fuerza)", content: "Medida de transferencia de energ√≠a por fuerza."}, back: { title: "W", formula:"$W = Fs \\cos(\\alpha)$", units:"Julio (J)", vars:"F - fuerza (N), s - desplazamiento (m), Œ± - √°ngulo entre F y s", content: "La energ√≠a transferida cuando una fuerza mueve un objeto a lo largo de una distancia."}},
                        { front: { title: "Ecuaci√≥n del Balance T√©rmico", content: "Intercambio de calor en un sistema aislado."}, back: { title: "Q_cedido + Q_ganado = 0", formula:"$\\sum Q_i = 0$", units:"Julio (J)", vars:"Q - cantidad de calor transferido", content: "En un sistema aislado, la suma del calor cedido por los objetos m√°s calientes es igual a la suma del calor ganado por los objetos m√°s fr√≠os."}},
                        { front: { title: "Ley de Ohm", content: "Relaci√≥n entre corriente, voltaje, resistencia."}, back: { title: "I = V / R", formula:"$I = \\frac{V}{R}$", units:"Corriente (A), Voltaje (V), Resistencia (Œ©)", vars:"I - corriente, V - voltaje, R - resistencia", content: "La corriente a trav√©s de un conductor es directamente proporcional al voltaje a trav√©s de √©l e inversamente proporcional a su resistencia."}},
                        { front: { title: "Ley de Coulomb", content: "Interacci√≥n de cargas puntuales."}, back: { title: "Fuerza Electrost√°tica", formula:"$F = k \\frac{|q_1 q_2|}{r^2}$", units:"Fuerza (N), carga (C), distancia (m)", vars:"k - constante de Coulomb ($‚âà 9 \\times 10^9$ N¬∑m¬≤/C¬≤), $q_1, q_2$ - cargas, r - distancia", content: "La magnitud de la fuerza electrost√°tica de atracci√≥n o repulsi√≥n entre dos cargas puntuales es directamente proporcional al producto de las magnitudes de las cargas e inversamente proporcional al cuadrado de la distancia entre ellas."}},
                        { front: { title: "Corriente El√©ctrica", content: "Flujo ordenado de carga."}, back: { title: "Intensidad de Corriente", formula:"$I = \\frac{\\Delta q}{\\Delta t}$", units:"Amperio (A)", vars:"$\\Delta q$ - carga (C) que pasa por una secci√≥n transversal, $\\Delta t$ - tiempo (s)", content: "Un flujo de carga el√©ctrica. La intensidad de corriente es la tasa a la que la carga fluye por un punto."}}
                    ],
                    problemsCards: [
                         { front: { title: "Problema: Velocidad", content: "Un coche viaj√≥ 180 km en 2 horas. ¬øCu√°l es su velocidad media en km/h?" }, back: { content: "90", solution: "Velocidad media se calcula como:\n\n\\[ v_{media} = \\frac{Distancia}{Tiempo} = \\frac{180\\ km}{2\\ h} = 90\\ km/h \\]" } },
                         { front: { title: "Problema: Aceleraci√≥n", content: "Un tren comienza a frenar a 72 km/h y se detiene en 20 s. Halla la magnitud de la aceleraci√≥n (en m/s¬≤)." }, back: { content: "1", solution: "Convertir velocidad a m/s:\n\n\\[ v_0 = 72\\ km/h = \\frac{72 \\times 1000}{3600} = 20\\ m/s \\]\n\nAceleraci√≥n:\n\n\\[ a = \\frac{v - v_0}{t} = \\frac{0 - 20}{20} = -1\\ m/s^2 \\]\n\nMagnitud:\n\n\\[ |a| = 1\\ m/s^2 \\]" } },
                         { front: { title: "Problema: Desplazamiento", content: "Un objeto se mueve con velocidad inicial de 5 m/s y aceleraci√≥n de 2 m/s¬≤. ¬øQu√© distancia recorre en 4 segundos (en m)?" }, back: { content: "36", solution: "F√≥rmula del desplazamiento con aceleraci√≥n constante:\n\n\\[ S = v_0 t + \\frac{a t^2}{2} \\]\n\nSustituir valores:\n\n\\[ S = 5 \\cdot 4 + \\frac{2 \\cdot 4^2}{2} = 20 + \\frac{32}{2} = 20 + 16 = 36\\ m \\]" } },
                         { front: { title: "Problema: 2¬™ Ley de Newton", content: "Un cuerpo de masa 5 kg se mueve con una aceleraci√≥n de 3 m/s¬≤. ¬øQu√© fuerza act√∫a sobre el cuerpo (en N)?" }, back: { content: "15", solution: "La fuerza se calcula usando la segunda ley de Newton:\n\n\\[ F = ma = 5\\ kg \\cdot 3\\ m/s^2 = 15\\ N \\]" } },
                         { front: { title: "Problema: Fuerza Gravitatoria", content: "¬øCu√°l es la fuerza de gravedad que act√∫a sobre un cuerpo de 15 kg (g=10 m/s¬≤) (en N)?" }, back: { content: "150", solution: "Fuerza de gravedad:\n\n\\[ F_g = mg = 15\\ kg \\cdot 10\\ m/s^2 = 150\\ N \\]" } },
                         { front: { title: "Problema: Peso", content: "¬øCu√°l es el peso de un cuerpo de 8 kg en reposo sobre una superficie horizontal (g=10 m/s¬≤) (en N)?" }, back: { content: "80", solution: "En reposo sobre una superficie horizontal, el peso $P$ es igual a la fuerza de gravedad:\n\n\\[ F_g = mg = 8 \\cdot 10 = 80\\ N \\]" } },
                         { front: { title: "Problema: Gravitaci√≥n Universal", content: "La masa de la Luna es aproximadamente 81 veces menor que la masa de la Tierra, y el radio de la Luna es aproximadamente 3.7 veces menor que el radio de la Tierra. ¬øCu√°ntas veces es menor la aceleraci√≥n de la gravedad en la Luna en comparaci√≥n con la Tierra?" }, back: { content: "6", solution: "Aceleraci√≥n de la gravedad:\n\n\\[ g = \\frac{GM}{R^2} \\]\n\nRelaci√≥n de aceleraciones Luna/Tierra:\n\n\\[ \\frac{g_{L}}{g_{T}} = \\frac{M_{L}}{M_{T}} \\div \\left( \\frac{R_{L}}{R_{T}} \\right)^2 = \\frac{1}{81} \\div \\left( \\frac{1}{3.7} \\right)^2 \\approx \\frac{1}{81} \\div \\frac{1}{13.69} = \\frac{13.69}{81} \\approx \\frac{1}{6} \\]\n\nLa aceleraci√≥n en la Luna es aproximadamente 6 veces menor." } },
                         { front: { title: "Problema: Momento Lineal", content: "Un cuerpo de 0.5 kg se mueve a una velocidad de 8 m/s. ¬øCu√°l es su momento lineal (en kg¬∑m/s)?" }, back: { content: "4", solution: "Momento lineal:\n\n\\[ p = mv = 0.5\\ kg \\cdot 8\\ m/s = 4\\ kg\\cdot m/s \\]" } },
                         { front: { title: "Problema: Impulso", content: "Una fuerza de 10 N actu√≥ sobre un cuerpo durante 3 s. ¬øCu√°nto cambi√≥ el momento lineal del cuerpo (en kg¬∑m/s)?" }, back: { content: "30", solution: "El cambio en el momento lineal es igual al impulso de la fuerza:\n\n\\[ \\Delta p = F \\Delta t = 10\\ N \\cdot 3\\ s = 30\\ N\\cdot s = 30\\ kg\\cdot m/s \\]" } },
                         { front: { title: "Problema: Conservaci√≥n del Momento", content: "Dos bolas de plastilina con masas de 6 kg y 4 kg se mueven una hacia la otra a velocidades de 3 m/s y 2 m/s, respectivamente. ¬øCu√°l es la magnitud de su velocidad despu√©s de una colisi√≥n perfectamente inel√°stica (en m/s)?" }, back: { content: "1", solution: "Eje X hacia la derecha. Bola de 6 kg se mueve a la derecha (v1=3), bola de 4 kg se mueve a la izquierda (v2=-2).\n\nMomento inicial:\n\n\\[ p_1 = m_1 v_1 = 6 \\cdot 3 = 18 \\]\n\\[ p_2 = m_2 v_2 = 4 \\cdot (-2) = -8 \\]\n\nMomento inicial total:\n\n\\[ p_{inicial} = 18 - 8 = 10\\ kg\\cdot m/s \\]\n\nDespu√©s de la colisi√≥n, masa total $m = 6 + 4 = 10$ kg. Velocidad final $v$.\n\nConservaci√≥n del momento:\n\n\\[ p_{inicial} = p_{final} \\Rightarrow 10 = 10v \\Rightarrow v = 1\\ m/s \\]" } },
                         { front: { title: "Problema: Trabajo", content: "Una fuerza de 20 N movi√≥ un cuerpo 5 m en la direcci√≥n de la fuerza. ¬øQu√© trabajo se realiz√≥ (en J)?" }, back: { content: "100", solution: "$W = F s \\cos(0^\circ) = 20\\ N \\cdot 5\\ m \\cdot 1 = 100\\ J$" } },
                         { front: { title: "Problema: Energ√≠a Cin√©tica", content: "Un cuerpo de masa 4 kg se mueve a una velocidad de 10 m/s. ¬øCu√°l es su energ√≠a cin√©tica (en J)?" }, back: { content: "200", solution: "Energ√≠a cin√©tica:\n\n\\[ E_k = \\frac{mv^2}{2} = \\frac{4 \\cdot 10^2}{2} = 200\\ J \\]" } },
                         { front: { title: "Problema: Energ√≠a Potencial", content: "Un cuerpo de masa 2 kg se eleva a una altura de 5 m. ¬øCu√°l es su energ√≠a potencial (g=10 m/s¬≤) (en J)?" }, back: { content: "100", solution: "Energ√≠a potencial:\n\n\\[ E_p = mgh = 2 \\cdot 10 \\cdot 5 = 100\\ J \\]" } },
                         { front: { title: "Problema: Ley de Ohm", content: "El voltaje a trav√©s de una resistencia es de 12 V, su resistencia es de 3 Œ©. ¬øCu√°l es la corriente (en A)?" }, back: { content: "4", solution: "Corriente seg√∫n la ley de Ohm:\n\n\\[ I = \\frac{V}{R} = \\frac{12\\ V}{3\\ \\Omega} = 4\\ A \\]" } },
                         { front: { title: "Problema: Potencia El√©ctrica", content: "La corriente en una l√°mpara es de 0.5 A, el voltaje es de 220 V. ¬øCu√°l es la potencia de la l√°mpara (en W)?" }, back: { content: "110", solution: "Potencia:\n\n\\[ P = VI = 220\\ V \\cdot 0.5\\ A = 110\\ W \\]" } },
                         { front: { title: "Problema: Ley de Coulomb", content: "¬øCu√°ntas veces cambia la fuerza de interacci√≥n entre dos cargas si la distancia entre ellas se reduce a la mitad?" }, back: { content: "4", solution: "La fuerza de interacci√≥n es inversamente proporcional al cuadrado de la distancia:\n\n\\[ F \\sim \\frac{1}{r^2} \\]\n\nSi $r$ se reduce a la mitad, $r^2$ disminuye en un factor de 4. La fuerza aumenta en un factor de 4." } },
                         { front: { title: "Problema: Cantidad de Calor", content: "La capacidad calor√≠fica espec√≠fica del agua es 4200 J/(kg¬∑¬∞C). ¬øCu√°nto calor (en kJ) se necesita para calentar 0.5 kg de agua en 20 ¬∞C?" }, back: { content: "42", solution: "Calor:\n\n\\[ Q = cm\\Delta T = 4200 \\cdot 0.5 \\cdot 20 = 42000\\ J = 42\\ kJ \\]" } },
                         { front: { title: "Problema: Carga El√©ctrica", content: "Una carga de 120 C pas√≥ a trav√©s de un conductor en 1 minuto. ¬øCu√°l es la corriente en el conductor (en A)?" }, back: { content: "2", solution: "Tiempo $t = 1\\ min = 60\\ s$. Corriente:\n\n\\[ I = \\frac{\\Delta q}{\\Delta t} = \\frac{120\\ C}{60\\ s} = 2\\ A \\]" } },
                         { front: { title: "Problema: Frecuencia", content: "Un objeto realiz√≥ 50 oscilaciones en 10 segundos. ¬øCu√°l es la frecuencia de las oscilaciones (en Hz)?" }, back: { content: "5", solution: "Frecuencia:\n\n\\[ f = \\frac{N}{t} = \\frac{50}{10} = 5\\ Hz \\]" } },
                         { front: { title: "Problema: Longitud de Onda", content: "La velocidad del sonido en el aire es 340 m/s. ¬øCu√°l es la longitud de onda del sonido con una frecuencia de 170 Hz (en m)?" }, back: { content: "2", solution: "Longitud de onda:\n\n\\[ \\lambda = \\frac{v}{f} = \\frac{340\\ m/s}{170\\ Hz} = 2\\ m \\]" } }
                    ]
                }
            }
        };
        let allDecks = {};
        let customDecks = {};
        let currentDeckId = null;
        let currentDeckData = null;
        let currentDeckCards = [];
        let termsDeck = [];
        let problemsDeck = [];
        let originalTermsDeck = [];
        let originalProblemsDeck = [];
        let currentCardIndex = 0;
        let isFlipped = false;
        let isShuffled = false;
        let currentLanguage = 'en';
        let currentMode = 'flashcard';
        let stats = { reviewed: 0, correct: 0, streak: 0, maxStreak: 0, badgesEarned: [] };
        let earnedBadges = new Set();
        let viewedTermCardIndices = new Set();
        let totalAttempts = 0;
        let totalCorrect = 0;
        let quizAttemptsInSession = 0;
        let quizCorrectInSession = 0;
        let problemAttemptsInSession = 0;
        let problemCorrectInSession = 0;
        let termInputCounter = 0;
        let problemInputCounter = 0;
        let quizAnswered = false;
        let timerInterval = null;
        let timerStartTime = 0;
        let elapsedSeconds = 0;
        let isMusicPlaying = false;
        let musicVolume = 0.4;

        const flashcardEl = document.getElementById('flashcard');
        const front = flashcardEl?.querySelector('.flashcard-front');
        const back = flashcardEl?.querySelector('.flashcard-back');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const flipBtn = document.getElementById('flipBtn');
        const shuffleBtn = document.getElementById('shuffleBtn');
        const progressBar = document.getElementById('progressBar');
        const timerDisplay = document.getElementById('timerDisplay');
        const chooseDeckBtn = document.getElementById('chooseDeckBtn');
        const deckModal = document.getElementById('deckModal');
        const deckList = document.getElementById('deckList');
        const themeToggle = document.getElementById('themeToggle');
        const languageToggle = document.getElementById('languageToggle');
        const languageMenu = document.getElementById('languageMenu');
        const modeCards = document.querySelectorAll('.mode-card');
        const flashcardModeCard = document.getElementById('flashcardModeCard');
        const quizModeCard = document.getElementById('quizModeCard');
        const problemsModeCard = document.getElementById('problemsModeCard');
        const quizOptionsContainer = document.getElementById('quizOptions');
        const problemSolverContainer = document.getElementById('problemSolverContainer');
        const problemAnswerInput = document.getElementById('problemAnswerInput');
        const submitProblemAnswerBtn = document.getElementById('submitProblemAnswer');
        const answerFeedback = document.getElementById('answerFeedback');
        const cardsReviewedStat = document.getElementById('cardsReviewed');
        const correctAnswersStat = document.getElementById('correctAnswers');
        const totalAttemptsStat = document.getElementById('totalAttempts');
        const accuracyStat = document.getElementById('accuracy');
        const streakCountStat = document.getElementById('streakCount');
        const resetStatsBtn = document.getElementById('resetStatsBtn');
        const badgeNotification = document.getElementById('badgeNotification');
        const badgeDescription = badgeNotification?.querySelector('p#badgeDescription');
        const createDeckBtn = document.getElementById('createDeckBtn');
        const createDeckModal = document.getElementById('createDeckModal');
        const createDeckForm = document.getElementById('createDeckForm');
        const deckTitleInput = document.getElementById('deckTitleInput');
        const deckDescInput = document.getElementById('deckDescInput');
        const deckTypeInput = document.getElementById('deckTypeInput');
        const termsSection = document.getElementById('termsSection');
        const problemsSection = document.getElementById('problemsSection');
        const termsInputContainer = document.getElementById('termsInputContainer');
        const problemsInputContainer = document.getElementById('problemsInputContainer');
        const addAnotherTermBtn = document.getElementById('addAnotherTermBtn');
        const addAnotherProblemBtn = document.getElementById('addAnotherProblemBtn');
        const createDeckModalTitle = document.getElementById('createDeckModalTitle');
        const achievementsBtn = document.getElementById('achievementsBtn');
        const achievementsModal = document.getElementById('achievementsModal');
        const achievementsList = document.getElementById('achievementsList');
        const currentDeckDisplay = document.getElementById('currentDeckDisplay');
        const currentDeckLabelSpan = currentDeckDisplay?.querySelector('span');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const musicToggleBtn = document.getElementById('musicToggleBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const aboutBtn = document.getElementById('aboutBtn');
        const aboutModal = document.getElementById('aboutModal');
        const resetAchievementsBtn = document.getElementById('resetAchievementsBtn');

        function renderMathJax() {
            if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
                const elementsToTypeset = [flashcardEl, quizOptionsContainer, answerFeedback].filter(el => el && document.body.contains(el));
                if (elementsToTypeset.length > 0) {
                    MathJax.typesetPromise(elementsToTypeset);
                }
            }
        }

        function loadCustomDecksFromLocalStorage() {
            const storedDecks = localStorage.getItem('customFlashcardDecks');
            if (storedDecks) {
                try {
                    customDecks = JSON.parse(storedDecks);
                    return customDecks;
                } catch (e) {
                    customDecks = {};
                    localStorage.removeItem('customFlashcardDecks');
                    return {};
                }
            }
            customDecks = {};
            return {};
        }

        function saveCustomDecksToLocalStorage() {
            try {
                localStorage.setItem('customFlashcardDecks', JSON.stringify(customDecks));
            } catch (e) {
                alert("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–ª–æ–¥—ã. –í–æ–∑–º–æ–∂–Ω–æ, —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–æ.");
            }
        }

        function combineAllDecks() {
            const loadedCustomDecks = loadCustomDecksFromLocalStorage();
            const clonedPredefined = JSON.parse(JSON.stringify(predefinedDecksMultiLang));
            allDecks = { ...clonedPredefined, ...loadedCustomDecks };
        }

        function updateLanguage(lang) {
            if (!languages[lang]) lang = 'ru';
            currentLanguage = lang;
            localStorage.setItem('flashcardLang', lang);
            document.documentElement.lang = lang;
            document.title = languages[lang]?.['html-title'] || "Flashcards";

            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                const translation = languages[lang]?.[key];
                if (translation !== undefined) {
                     if ((el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') && el.placeholder !== undefined) el.placeholder = translation;
                     else if (el.tagName === 'OPTION') el.textContent = translation;
                     else if (el.title && (el.id === 'languageToggle' || el.id === 'themeToggle' || el.id === 'resetStatsBtn' || el.classList.contains('delete-term-btn') || el.classList.contains('delete-problem-btn') || el.classList.contains('delete-deck-btn') || el.classList.contains('close-modal'))) { el.title = translation; if (el.ariaLabel) el.ariaLabel = translation;}
                     else if (el.tagName === 'BUTTON' && el.querySelector('span[data-lang-key]')) { const span = el.querySelector('span[data-lang-key]'); if(span && span.dataset.langKey === key) span.textContent = translation; }
                     else if (el.id === 'currentDeckDisplay' && currentDeckLabelSpan) { el.firstChild.textContent = translation + ' '; }
                     else el.textContent = translation;
                }
            });
            if (currentDeckId && allDecks[currentDeckId]) {
                loadDeck(currentDeckId);
            } else {
                updateCard();
            }

            if (shuffleBtn) shuffleBtn.textContent = languages[currentLanguage]?.[isShuffled ? 'original-order' : 'shuffle'] || (isShuffled ? '–ü–æ –ø–æ—Ä—è–¥–∫—É' : '–ü–µ—Ä–µ–º–µ—à–∞—Ç—å');
            if (currentDeckId && currentDeckLabelSpan) currentDeckLabelSpan.textContent = currentDeckData?.title || currentDeckId;
            else if (currentDeckLabelSpan) currentDeckLabelSpan.textContent = '';
            updateMusicButton();
            if (currentDeckId) { updateCard(); if (currentMode === 'quiz') generateQuizOptions(); }
            else showInitialMessage();

            if (deckModal?.style.display === 'flex') populateDeckList();
            if (createDeckModal?.style.display === 'flex') updateLanguageForElement(createDeckModal);
            if (achievementsModal?.style.display === 'flex') populateAchievementsList();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function updateCard() {
            if (!flashcardEl || !front || !back) return;
            if (!currentDeckCards || currentDeckCards.length === 0) { updateButtonStates(true); return; }
            if (currentCardIndex >= currentDeckCards.length) currentCardIndex = 0;
            if (currentCardIndex < 0) currentCardIndex = 0;

            const card = currentDeckCards[currentCardIndex];
            if (!card || !card.front || !card.back) {
                front.innerHTML = '<h2>–û—à–∏–±–∫–∞</h2><p>–î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –Ω–µ–≤–µ—Ä–Ω—ã</p>';
                back.innerHTML = '';
                updateButtonStates(true);
                return;
            }

            if ((currentMode === 'flashcard' || currentMode === 'quiz')) {
                 const originalIndex = originalTermsDeck.findIndex(c => c === card);
                 if (originalIndex !== -1 && !viewedTermCardIndices.has(originalIndex)) {
                    viewedTermCardIndices.add(originalIndex);
                    stats.reviewed = viewedTermCardIndices.size;
                    if (cardsReviewedStat) cardsReviewedStat.textContent = stats.reviewed;
                 }
             }

            flashcardEl.classList.remove('flipped'); isFlipped = false;
            flashcardEl.classList.remove('card-animation'); void flashcardEl.offsetWidth; flashcardEl.classList.add('card-animation');
            front.innerHTML = ''; back.innerHTML = '';

            const isProblemMode = currentMode === 'problems';
            const isQuizMode = currentMode === 'quiz';

            if (isProblemMode) {
                front.innerHTML = `
                    <h2 class="flashcard-term-topic">${card.front.title || languages[currentLanguage]['problem-header'] || '–ó–∞–¥–∞—á–∞'}</h2>
                    <p class="flashcard-problem-text">${card.front.content || ''}</p>`;
                back.innerHTML = `
                    <div class="flashcard-back-section">
                        <strong>${languages[currentLanguage]['problem-answer-label'] || '–û—Ç–≤–µ—Ç:'}</strong>
                        <div class="flashcard-problem-answer">${card.back.content || '-'}</div>
                    </div>`;
            } else {
                front.innerHTML = `
                    <h2 class="flashcard-term-topic">${card.front.title || ''}</h2>
                    <p class="flashcard-term-prompt">${card.front.content || ''}</p>`;
                back.innerHTML = `
                    <div class="flashcard-back-section"><strong>${languages[currentLanguage]['card-back-formula-label'] || '–§–æ—Ä–º—É–ª–∞:'}</strong><div class="flashcard-back-content">${card.back.formula || '-'}</div></div>
                    <div class="flashcard-back-section"><strong>${languages[currentLanguage]['card-back-units-label'] || '–ï–¥. –∏–∑–º.:'}</strong><div class="flashcard-back-content">${card.back.units || '-'}</div></div>
                    <div class="flashcard-back-section"><strong>${languages[currentLanguage]['card-back-vars-label'] || '–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:'}</strong><div class="flashcard-back-content">${card.back.vars || '-'}</div></div>
                    <div class="flashcard-back-section"><strong>${languages[currentLanguage]['card-back-content-label'] || '–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:'}</strong><div class="flashcard-back-content">${card.back.content || '-'}</div></div>`;
            }

            renderMathJax();
            updateModeUI();
            hideAnswerFeedback();
            quizAnswered = false;
            updateProgressBar();
            updateButtonStates();
        }

        function showInitialMessage() {
            if (!flashcardEl || !front || !back) return;
            flashcardEl.classList.remove('flipped'); isFlipped = false;
            front.innerHTML = `<h2 class="flashcard-term-topic" data-lang-key="start-title">${languages[currentLanguage]['start-title']}</h2><p class="flashcard-term-prompt" data-lang-key="start-content">${languages[currentLanguage]['start-content']}</p>`;
            back.innerHTML = `<h2 data-lang-key="ready-title">${languages[currentLanguage]['ready-title']}</h2><p data-lang-key="ready-content">${languages[currentLanguage]['ready-content']}</p>`;
            if (quizOptionsContainer) quizOptionsContainer.style.display = 'none';
            if (problemSolverContainer) problemSolverContainer.style.display = 'none';
            hideAnswerFeedback();
            renderMathJax();
            updateProgressBar(true);
            updateButtonStates(true);
            if (currentDeckLabelSpan) currentDeckLabelSpan.textContent = '';
            stopTimer();
            resetTimerDisplay();
        }

        function resetAchievements() {
            if (confirm(languages[currentLanguage]['confirm-reset-achievements'] || 'Are you sure you want to reset all achievements? This cannot be undone.')) {
                earnedBadges.clear();
                stats.badgesEarned = [];
                localStorage.removeItem('earnedBadgeIds');
                localStorage.removeItem('earnedBadgesData');
                populateAchievementsList();
                alert(languages[currentLanguage]['achievements-reset-success'] || 'Achievements have been reset.');
            }
        }

        function updateProgressBar(reset = false) {
            if (!progressBar) return;
            if (reset || !currentDeckCards || currentDeckCards.length === 0) {
                progressBar.style.width = '0%';
            } else {
                const progress = ((currentCardIndex + 1) / currentDeckCards.length) * 100;
                progressBar.style.width = `${progress}%`;
            }
        }

        function updateButtonStates(reset = false) {
            const noCardsLoaded = !currentDeckCards || currentDeckCards.length === 0;
            if (prevBtn) prevBtn.disabled = reset || noCardsLoaded || currentCardIndex === 0;
            if (nextBtn) nextBtn.disabled = reset || noCardsLoaded;
            if (flipBtn) flipBtn.disabled = reset || noCardsLoaded || currentMode !== 'flashcard';
            if (shuffleBtn) {
                shuffleBtn.disabled = reset || noCardsLoaded;
                shuffleBtn.textContent = languages[currentLanguage]?.[isShuffled ? 'original-order' : 'shuffle'] || (isShuffled ? '–ü–æ –ø–æ—Ä—è–¥–∫—É' : '–ü–µ—Ä–µ–º–µ—à–∞—Ç—å');
            }
        }

        function updateModesAvailability(hasTerms, hasProblems) {
            if (!flashcardModeCard || !quizModeCard || !problemsModeCard) return;

            flashcardModeCard.classList.toggle('disabled', !hasTerms);
            quizModeCard.classList.toggle('disabled', !hasTerms);
            problemsModeCard.classList.toggle('disabled', !hasProblems);

            const currentModeCard = document.querySelector(`.mode-card[data-mode="${currentMode}"]`);
            if (currentModeCard && currentModeCard.classList.contains('disabled')) {
                if (hasTerms) {
                    switchMode('flashcard');
                } else if (hasProblems) {
                    switchMode('problems');
                } else {
                    modeCards.forEach(card => card.classList.add('disabled'));
                }
            } else if (currentModeCard) {
                modeCards.forEach(card => card.classList.remove('active'));
                currentModeCard.classList.add('active');
            }
        }

        function flipCard() {
            if (currentMode === 'flashcard' && currentDeckCards?.length > 0 && flashcardEl) {
                flashcardEl.classList.toggle('flipped');
                isFlipped = !isFlipped;
            }
        }

        function nextCard() {
            if (!currentDeckCards?.length) return;
            if (currentCardIndex < currentDeckCards.length - 1) {
                currentCardIndex++;
                updateCard();
            } else {
                checkPerfectionBadge(currentMode);
                checkBadgeCompletion();
                currentCardIndex = 0;
                updateCard();
            }
        }

        function prevCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                updateCard();
            }
        }

        function toggleShuffle() {
            let deckToShuffle = (currentMode === 'problems') ? problemsDeck : termsDeck;
            let originalDeck = (currentMode === 'problems') ? originalProblemsDeck : originalTermsDeck;

            if (!deckToShuffle || deckToShuffle.length < 2) return;

            isShuffled = !isShuffled;
            if (isShuffled) {
                currentDeckCards = shuffleArray([...deckToShuffle]);
            } else {
                currentDeckCards = [...originalDeck];
            }
            currentCardIndex = 0;
            updateCard();
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
            const secs = (seconds % 60).toString().padStart(2, '0');
            return `${mins}:${secs}`;
        }

        function updateTimerDisplay() {
            if (timerDisplay) {
                timerDisplay.textContent = formatTime(elapsedSeconds);
            }
        }

        function resetTimerDisplay() {
            if (timerDisplay) {
                timerDisplay.textContent = formatTime(0);
                timerDisplay.classList.remove('visible');
            }
        }

        function startTimer() {
            stopTimer();
            if (timerDisplay) timerDisplay.classList.add('visible');
            timerStartTime = Date.now();
            elapsedSeconds = 0;
            updateTimerDisplay();

            timerInterval = setInterval(() => {
                elapsedSeconds = Math.floor((Date.now() - timerStartTime) / 1000);
                updateTimerDisplay();
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            if (timerDisplay) timerDisplay.classList.remove('visible');
        }

        function resetTimer() {
            stopTimer();
            elapsedSeconds = 0;
            resetTimerDisplay();
        }

        function loadDeck(deckId) {
            checkPerfectionBadge(currentMode);
            const rawDeckData = allDecks[deckId];
            if (!rawDeckData) { 
                currentDeckId = null;
                showInitialMessage(); 
                updateModesAvailability(false, false); 
                return; 
            }

            currentDeckData = rawDeckData[currentLanguage] || rawDeckData['ru'] || Object.values(rawDeckData).find(d => typeof d === 'object' && (d.cards || d.termsCards || d.problemsCards)) || rawDeckData;
            if (!currentDeckData || typeof currentDeckData !== 'object') {
                currentDeckId = null;
                showInitialMessage();
                updateModesAvailability(false, false);
                return;
            }

            currentDeckId = deckId;
            localStorage.setItem('lastDeckId', deckId);
            const deckType = currentDeckData.deckType || 'terms';
            const deckTitle = currentDeckData.title || deckId;
            termsDeck = []; problemsDeck = []; originalTermsDeck = []; originalProblemsDeck = [];
            currentCardIndex = 0; isShuffled = false;
            viewedTermCardIndices.clear();
            resetStats();
            quizAttemptsInSession = 0; quizCorrectInSession = 0;
            problemAttemptsInSession = 0; problemCorrectInSession = 0;

            if (deckType === 'combined') { termsDeck = currentDeckData.termsCards || []; problemsDeck = currentDeckData.problemsCards || []; }
            else if (deckType === 'terms') { termsDeck = currentDeckData.cards || []; }
            else if (deckType === 'problems') { problemsDeck = currentDeckData.cards || []; }
            originalTermsDeck = [...termsDeck]; originalProblemsDeck = [...problemsDeck];

            const hasTerms = termsDeck.length > 0;
            const hasProblems = problemsDeck.length > 0;

            stopTimer();
            resetTimerDisplay();
            let initialMode = 'flashcard';

            if (hasTerms) {
                initialMode = 'flashcard';
                currentDeckCards = [...termsDeck];
            }
            else if (hasProblems) {
                initialMode = 'problems';
                currentDeckCards = [...problemsDeck];
            }
            else { 
                initialMode = 'flashcard';
                currentDeckCards = [];
            }

            currentMode = initialMode;

            if (currentDeckLabelSpan) currentDeckLabelSpan.textContent = deckTitle;
            else if (currentDeckDisplay) currentDeckDisplay.firstChild.textContent = (languages[currentLanguage]['current-deck-label'] || '–¢–µ–∫—É—â–∞—è –∫–æ–ª–æ–¥–∞:') + ' ';

            if (currentDeckCards.length > 0) {
                updateCard();
            } else {
                showInitialMessage();
            }
            updateModesAvailability(hasTerms, hasProblems);

            if (currentMode === 'quiz' || currentMode === 'problems') {
                startTimer();
            }
        }

        function updateStats(type, mode) {
            let updateAccuracyDisplay = false;
            let justIncrementedAttempts = false;

            if (mode === 'quiz') {
                quizAttemptsInSession++;
                if (type === 'correct') quizCorrectInSession++;
            } else if (mode === 'problems') {
                problemAttemptsInSession++;
                if (type === 'correct') problemCorrectInSession++;
            }

            if (type === 'correct') {
                totalCorrect++;
                stats.streak++;
                stats.maxStreak = Math.max(stats.maxStreak, stats.streak);
                if (!justIncrementedAttempts) {
                    totalAttempts++;
                    justIncrementedAttempts = true;
                }
                updateAccuracyDisplay = true;
            } else if (type === 'incorrect') {
                stats.streak = 0;
                 if (!justIncrementedAttempts) {
                    totalAttempts++;
                    justIncrementedAttempts = true;
                }
                updateAccuracyDisplay = true;
            }

            if (correctAnswersStat) correctAnswersStat.textContent = totalCorrect;
            if (streakCountStat) streakCountStat.textContent = stats.streak;
            if (totalAttemptsStat) totalAttemptsStat.textContent = totalAttempts;
            if (updateAccuracyDisplay && accuracyStat) {
                const accuracyValue = totalAttempts > 0 ? ((totalCorrect / totalAttempts) * 100).toFixed(0) : 0;
                accuracyStat.textContent = `${accuracyValue}%`;
            }

            if (justIncrementedAttempts) {
                checkBadges();
            }
        }

        function populateDeckList() {
            if (!deckList) return;
            deckList.innerHTML = '';
            const deckEntries = Object.entries(allDecks);
            deckEntries.sort(([idA, deckA], [idB, deckB]) => {
                const isAPredefined = predefinedDecksMultiLang.hasOwnProperty(idA);
                const isBPredefined = predefinedDecksMultiLang.hasOwnProperty(idB);
                if (isAPredefined && !isBPredefined) return -1;
                if (!isAPredefined && isBPredefined) return 1;
                const titleA = (deckA[currentLanguage]?.title || deckA['ru']?.title || deckA.title || idA).toLowerCase();
                const titleB = (deckB[currentLanguage]?.title || deckB['ru']?.title || deckB.title || idB).toLowerCase();
                return titleA.localeCompare(titleB);
            });

            deckEntries.forEach(([deckId, deckData]) => {
                const langContent = deckData[currentLanguage] || deckData['ru'] || Object.values(deckData).find(d => typeof d === 'object' && (d.cards || d.termsCards || d.problemsCards)) || deckData;
                if (!langContent || typeof langContent !== 'object') {
                    return;
                }
                const title = langContent.title || deckId;
                const description = langContent.description || "";
                const deckType = langContent.deckType || 'terms';
                const isCustom = customDecks.hasOwnProperty(deckId);
                let cardCount = 0;
                if (deckType === 'combined') {
                    cardCount = (langContent.termsCards?.length || 0) + (langContent.problemsCards?.length || 0);
                } else if (deckType === 'terms') {
                    cardCount = langContent.cards?.length || langContent.termsCards?.length || 0;
                } else if (deckType === 'problems') {
                    cardCount = langContent.cards?.length || langContent.problemsCards?.length || 0;
                }
                let typeKey = 'deck-type-terms';
                if (deckType === 'problems') typeKey = 'deck-type-problems';
                else if (deckType === 'combined') typeKey = 'deck-type-combined';
                const typeText = languages[currentLanguage]?.[typeKey] || deckType;

                const li = document.createElement('li');
                li.classList.add('deck-item');
                li.dataset.deckId = deckId;
                const deleteBtnTitle = `${languages[currentLanguage]?.['confirm-delete'] || '–£–¥–∞–ª–∏—Ç—å –∫–æ–ª–æ–¥—É'} ${title}`;
                li.innerHTML = `
                    <h3 class="deck-title">${title} <span style="font-size:0.8em; color: #888;">(${typeText})</span></h3>
                    <p class="deck-info">${description}</p>
                    <p class="deck-info">${cardCount} –∫–∞—Ä—Ç(—ã)</p>
                    ${isCustom ? `<button class="delete-deck-btn" data-deck-id="${deckId}" aria-label="${deleteBtnTitle}" title="${deleteBtnTitle}">üóëÔ∏è</button>` : ''}
                `;
                li.addEventListener('click', (e) => {
                    if (e.target.classList.contains('delete-deck-btn')) return;
                    loadDeck(deckId);
                    if (deckModal) deckModal.style.display = 'none';
                });
                const deleteBtn = li.querySelector('.delete-deck-btn');
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        handleDeleteDeck(deckId);
                    });
                }
                deckList.appendChild(li);
            });
            if (deckEntries.length === 0) {
                deckList.innerHTML = `<li data-lang-key="no-decks-available">${languages[currentLanguage]?.['no-decks-available'] || '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–ª–æ–¥.'}</li>`;
            }
        }

        function handleDeleteDeck(deckId) {
            if (!customDecks[deckId]) return;
            const deckTitleToDelete = (customDecks[deckId][currentLanguage]?.title || customDecks[deckId]['ru']?.title || customDecks[deckId].title || deckId);
            if (confirm(`${languages[currentLanguage]?.['confirm-delete'] || '–£–¥–∞–ª–∏—Ç—å –∫–æ–ª–æ–¥—É'} "${deckTitleToDelete}"?`)) {
                delete customDecks[deckId];
                delete allDecks[deckId];
                saveCustomDecksToLocalStorage();
                populateDeckList();
                if (currentDeckId === deckId) {
                    currentDeckId = null;
                    currentDeckData = null;
                    currentDeckCards = [];
                    termsDeck = []; problemsDeck = [];
                    originalTermsDeck = []; originalProblemsDeck = [];
                    const firstDeckId = Object.keys(allDecks)[0];
                    if (firstDeckId) {
                        loadDeck(firstDeckId);
                    } else {
                        showInitialMessage();
                        updateModesAvailability(false, false);
                    }
                }
            }
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            if (themeToggle) themeToggle.textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('flashcardTheme', isDarkMode ? 'dark' : 'light');
        }

        function initializeTheme() {
            const savedTheme = localStorage.getItem('flashcardTheme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                if (themeToggle) themeToggle.textContent = '‚òÄÔ∏è';
            } else {
                document.body.classList.remove('dark-mode');
                if (themeToggle) themeToggle.textContent = 'üåô';
            }
        }

        function initializeLanguage() {
            const savedLang = localStorage.getItem('flashcardLang') || navigator.language.split('-')[0] || 'ru';
            updateLanguage(languages[savedLang] ? savedLang : 'ru');
        }

        function initializeDecks() {
            combineAllDecks();
            const lastDeckId = localStorage.getItem('lastDeckId');
            let deckToLoad = null;

            if (lastDeckId && allDecks[lastDeckId]) {
                deckToLoad = lastDeckId;
            } else {
                const firstDeckId = Object.keys(allDecks)[0];
                if(firstDeckId) {
                    deckToLoad = firstDeckId;
                }
            }

            if (deckToLoad) {
                loadDeck(deckToLoad);
            } else {
                showInitialMessage();
                updateModesAvailability(false, false);
            }
        }

        function updateModeUI() {
            hideAnswerFeedback();
            if (problemAnswerInput) problemAnswerInput.value = '';
            quizAnswered = false;

            const isQuiz = currentMode === 'quiz';
            const isProblems = currentMode === 'problems';
            const isFlashcard = currentMode === 'flashcard';

            if (quizOptionsContainer) quizOptionsContainer.style.display = isQuiz ? 'flex' : 'none';
            if (problemSolverContainer) problemSolverContainer.style.display = isProblems ? 'block' : 'none';
            if (flipBtn) flipBtn.style.display = isFlashcard ? 'inline-flex' : 'none';

            if (isQuiz) generateQuizOptions();
        }

        function switchMode(newMode) {
            const targetCard = document.querySelector(`.mode-card[data-mode="${newMode}"]`);
            if (!targetCard || targetCard.classList.contains('disabled') || currentMode === newMode) return;

            const oldMode = currentMode;

            checkPerfectionBadge(oldMode);

            currentMode = newMode;

            modeCards.forEach(card => card.classList.remove('active'));
            targetCard.classList.add('active');

            if (newMode === 'quiz') { quizAttemptsInSession = 0; quizCorrectInSession = 0; }
            if (newMode === 'problems') { problemAttemptsInSession = 0; problemCorrectInSession = 0; }

            isShuffled = false;
            if (newMode === 'problems') { currentDeckCards = [...originalProblemsDeck]; }
            else { currentDeckCards = [...originalTermsDeck]; }

            currentCardIndex = 0;

            if (newMode === 'quiz' || newMode === 'problems') {
                resetTimer();
                startTimer();
            } else {
                stopTimer();
                resetTimerDisplay();
            }
             updateCard();
         }

        function generateQuizOptions() {
            if (!quizOptionsContainer) return;
            quizOptionsContainer.innerHTML = '';
             const deckSource = originalTermsDeck;
             const currentTermCard = currentDeckCards[currentCardIndex];
            if (!deckSource || deckSource.length === 0 || !currentTermCard?.back?.content) {
                quizOptionsContainer.innerHTML = `<p>${languages[currentLanguage]?.['no-options'] || '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.'}</p>`;
                return;
            }
            const correctAnswer = currentTermCard.back.content;
            let options = [correctAnswer];
            let attempts = 0;
            const maxOptions = Math.min(4, deckSource.length);
            while (options.length < maxOptions && attempts < deckSource.length * 3) {
                const randomIndex = Math.floor(Math.random() * deckSource.length);
                const potentialCard = deckSource[randomIndex];
                const potentialAnswer = potentialCard?.back?.content;
                if (potentialAnswer && potentialAnswer !== correctAnswer && !options.includes(potentialAnswer)) {
                    options.push(potentialAnswer);
                }
                attempts++;
            }
            shuffleArray(options);
            options.forEach(option => {
                const button = document.createElement('button');
                button.classList.add('quiz-option', 'button-style');
                 button.textContent = option;
                button.onclick = () => checkQuizAnswer(option === correctAnswer, button);
                quizOptionsContainer.appendChild(button);
            });
             renderMathJax();
        }

        function checkQuizAnswer(isCorrect, selectedButton) {
            if (quizAnswered || !currentDeckCards?.length) return;
            quizAnswered = true;
            showAnswerFeedback(isCorrect);
            updateStats(isCorrect ? 'correct' : 'incorrect', 'quiz');

            const correctAnswerText = currentDeckCards[currentCardIndex].back.content;
            quizOptionsContainer.querySelectorAll('.quiz-option').forEach(btn => {
                btn.disabled = true;
                const isBtnCorrectAnswer = (btn.textContent === correctAnswerText);
                if (btn === selectedButton) btn.classList.add(isCorrect ? 'correct' : 'incorrect');
                else if (isBtnCorrectAnswer && !isCorrect) btn.classList.add('correct');
            });
        }

        function checkProblemAnswer() {
            if (currentMode !== 'problems' || !currentDeckCards?.length || !currentDeckCards[currentCardIndex]?.back?.content || !problemAnswerInput) return;
            const userAnswerStr = problemAnswerInput.value.trim();
            const correctAnswerStr = String(currentDeckCards[currentCardIndex].back.content).trim();
            if (userAnswerStr === "") { showAnswerFeedback(false, correctAnswerStr); updateStats('incorrect', 'problems'); return; }
            const userNum = parseFloat(userAnswerStr.replace(',', '.'));
            const correctNum = parseFloat(correctAnswerStr.replace(',', '.'));
            let isCorrect = false;
            if (!isNaN(userNum) && !isNaN(correctNum)) isCorrect = Math.abs(userNum - correctNum) < 0.001;
            else isCorrect = userAnswerStr.toLowerCase() === correctAnswerStr.toLowerCase();
            showAnswerFeedback(isCorrect, isCorrect ? null : correctAnswerStr);
            updateStats(isCorrect ? 'correct' : 'incorrect', 'problems');
        }

        function showAnswerFeedback(isCorrect, correctAnswerText = null) {
            if(!answerFeedback) return;
            answerFeedback.style.display = 'block';
            let feedbackTextKey = isCorrect ? 'correct-feedback' : 'incorrect-feedback';
            let feedbackText = languages[currentLanguage]?.[feedbackTextKey] || (isCorrect ? 'Correct! ‚úì' : 'Incorrect ‚úó');
            let solutionHTML = '';
            const currentCard = currentDeckCards[currentCardIndex];
             
            if (!isCorrect && correctAnswerText != null) {
                feedbackText += ` <span class="correct-answer-text">"${correctAnswerText}"</span>`;
            }

            if (!isCorrect && currentMode === 'problems' && currentCard?.back?.solution) {
                const solutionText = currentCard.back.solution;
                solutionHTML = `
                <div class="problem-solution">
                  <strong>${languages[currentLanguage]['problem-solution-label'] || '–†–µ—à–µ–Ω–∏–µ:'}</strong><br>
                  <div class="math-small-wrapper">
                    <div class="math-small">${solutionText}</div>
                  </div>
                </div>`;
            }
            answerFeedback.innerHTML = feedbackText + solutionHTML;
            answerFeedback.className = 'answer-feedback';
            answerFeedback.classList.add(isCorrect ? 'correct' : 'incorrect');
            renderMathJax();
        }

        function hideAnswerFeedback() {
            if (answerFeedback) answerFeedback.style.display = 'none';
        }

        function resetStats() {
            stats = { reviewed: 0, streak: 0, maxStreak: 0, badgesEarned: stats.badgesEarned };
            viewedTermCardIndices.clear();

            totalAttempts = 0;
            totalCorrect = 0;

            if (cardsReviewedStat) cardsReviewedStat.textContent = '0';
            if (correctAnswersStat) correctAnswersStat.textContent = '0';
            if (accuracyStat) accuracyStat.textContent = '0%';
            if (streakCountStat) streakCountStat.textContent = '0';
            if (totalAttemptsStat) totalAttemptsStat.textContent = '0';

            if (currentDeckId) {
                currentCardIndex = 0;
                isShuffled = false;
                if (currentMode === 'problems') currentDeckCards = [...originalProblemsDeck];
                else currentDeckCards = [...originalTermsDeck];
                updateProgressBar();
                updateButtonStates();
                hideAnswerFeedback();
            } else {
                updateProgressBar(true);
                updateButtonStates(true);
            }
        }

        function checkBadges() {
            const streakBadges = [
                { id: 'streak-5', threshold: 5, key: 'streak-5-desc', titleKey: 'streak-title', icon: 'üî•' },
                { id: 'streak-10', threshold: 10, key: 'streak-10-desc', titleKey: 'streak-title', icon: 'üåü' },
                { id: 'streak-15', threshold: 15, key: 'streak-15-desc', titleKey: 'streak-title', icon: 'üöÄ' },
                { id: 'streak-20', threshold: 20, key: 'streak-20-desc', titleKey: 'streak-title', icon: 'üéØ' },
                { id: 'streak-25', threshold: 25, key: 'streak-25-desc', titleKey: 'streak-title', icon: 'üèÜ' },
                { id: 'streak-30', threshold: 30, key: 'streak-30-desc', titleKey: 'streak-title', icon: 'üéñÔ∏è' },
                { id: 'streak-35', threshold: 35, key: 'streak-35-desc', titleKey: 'streak-title', icon: 'üíé' },
                { id: 'streak-40', threshold: 40, key: 'streak-40-desc', titleKey: 'streak-title', icon: '‚ö°' },
                { id: 'streak-45', threshold: 45, key: 'streak-45-desc', titleKey: 'streak-title', icon: '‚ö°' },
                { id: 'streak-50', threshold: 50, key: 'streak-50-desc', titleKey: 'streak-title', icon: 'üëë' }
            ];

            streakBadges.forEach(badge => {
                if (stats.streak >= badge.threshold && !earnedBadges.has(badge.id)) {
                     awardBadge(badge.id, badge.titleKey, badge.key, badge.icon, { threshold: badge.threshold });
                }
            });

            const attemptsBadges = [
                { id: 'attempts-10', threshold: 10, key: 'attempts-10-desc', titleKey: 'attempts-title', icon: 'üü¢' },
                { id: 'attempts-100', threshold: 100, key: 'attempts-100-desc', titleKey: 'attempts-title', icon: 'üíØ' },
                { id: 'attempts-150', threshold: 150, key: 'attempts-150-desc', titleKey: 'attempts-title', icon: 'üèÖ' },
                { id: 'attempts-200', threshold: 200, key: 'attempts-200-desc', titleKey: 'attempts-title', icon: 'üéñÔ∏è' },
                { id: 'attempts-250', threshold: 250, key: 'attempts-250-desc', titleKey: 'attempts-title', icon: 'üëë' }
            ];

            attemptsBadges.forEach(badge => {
                if (totalAttempts >= badge.threshold && !earnedBadges.has(badge.id)) {
                     awardBadge(badge.id, badge.titleKey, badge.key, badge.icon, { threshold: badge.threshold });
                }
            });
        }

        function checkPerfectionBadge(modeToCheck) {
            if (!currentDeckId) return;

            let attempts = 0;
            let correct = 0;
            let badgeId = '';
            let titleKey = '';
            let descKey = '';

            if (modeToCheck === 'quiz' && originalTermsDeck.length > 0) {
                attempts = quizAttemptsInSession;
                correct = quizCorrectInSession;
                badgeId = `perfection-quiz-${currentDeckId}`;
                titleKey = 'perfection-quiz-title';
                descKey = 'perfection-quiz-desc';
            } else if (modeToCheck === 'problems' && originalProblemsDeck.length > 0) {
                attempts = problemAttemptsInSession;
                correct = problemCorrectInSession;
                badgeId = `perfection-problems-${currentDeckId}`;
                titleKey = 'perfection-problems-title';
                descKey = 'perfection-problems-desc';
            }
            if (badgeId && attempts > 0 && correct === attempts && !earnedBadges.has(badgeId)) {
                const requiredCount = (modeToCheck === 'quiz') ? originalTermsDeck.length : originalProblemsDeck.length;
                if (correct === requiredCount) {
                   awardBadge(badgeId, titleKey, descKey);
                }
            }
         }

        function checkBadgeCompletion() {
            if (currentMode === 'flashcard' && originalTermsDeck?.length > 0 && currentCardIndex === originalTermsDeck.length - 1) {
                const badgeId = `completed-<span class="math-inline">\{currentDeckId\}\-</span>{currentMode}`;
                if (!earnedBadges.has(badgeId)) {
                    awardBadge(badgeId, 'deck-completed-title-base', 'deck-completed-desc', 'üéâ', { deckTitle: currentDeckData?.title || currentDeckId });
                }
            }
        }

        function awardBadge(id, titleLangKey, descLangKey, icon = 'üèÜ', dynamicData = null) {
            if (earnedBadges.has(id)) return;
            
            const badgeData = {
                id: id,
                titleKey: titleLangKey,
                descKey: descLangKey,
                icon: icon,
                dynamic: dynamicData,
                timestamp: Date.now()
            };

            earnedBadges.add(id);
            if (!stats.badgesEarned.some(b => b.id === id)) {
                 stats.badgesEarned.push(badgeData);
            }

            showBadgeNotification(translateBadge(badgeData));

            saveEarnedBadges();

            if (achievementsModal?.style.display === 'flex') {
                populateAchievementsList();
            }
        }
        function translateBadge(badgeData) {
            if (!badgeData) return { name: '?', description: '?', icon: '?' };

            const lang = languages[currentLanguage] || languages['ru'];

            let name = `${badgeData.icon || 'üèÜ'} ${lang[badgeData.titleKey] || badgeData.titleKey}`;
            let description = lang[badgeData.descKey] || badgeData.descKey;

            if (badgeData.dynamic?.deckTitle && badgeData.titleKey === 'deck-completed-title-base') {
                name += ` (${badgeData.dynamic.deckTitle})`;
            }
            if (badgeData.dynamic?.threshold) {
                description = description.replace('{threshold}', badgeData.dynamic.threshold);
            }
        
            if (badgeData.descKey === 'deck-completed-desc') {
                description = lang['deck-completed-desc'] || description;
            }
        
            return {
                id: badgeData.id,
                name: name,
                description: description,
                icon: badgeData.icon
            };
        }

        function populateAchievementsList() {
            if (!achievementsList) return;
            achievementsList.innerHTML = '';
            loadEarnedBadges();
            if (stats.badgesEarned.length === 0) {
                achievementsList.innerHTML = `<li class="no-achievements" data-lang-key="no-achievements-yet">${languages[currentLanguage]['no-achievements-yet']}</li>`;
            } else {
                const sortedBadges = stats.badgesEarned.sort((a, b) => (a.timestamp || 0) - (b.timestamp || 0));
                sortedBadges.forEach(storedBadgeData => {
                    const translatedBadge = translateBadge(storedBadgeData);
                    const li = document.createElement('li');
                    li.classList.add('achievement-item');
                    li.innerHTML = `
                        <div class="achievement-icon">${translatedBadge.icon || 'üèÜ'}</div>
                        <div class="achievement-details">
                            <h4>${translatedBadge.name}</h4>
                            <p>${translatedBadge.description}</p>
                        </div>
                    `;
                    achievementsList.appendChild(li);
                });
            }
            const resetButtonInModal = document.getElementById('resetAchievementsBtn');
            if (resetButtonInModal) {
                resetButtonInModal.replaceWith(resetButtonInModal.cloneNode(true));
                document.getElementById('resetAchievementsBtn')?.addEventListener('click', resetAchievements);
                updateLanguageForElement(document.getElementById('resetAchievementsBtn')?.parentElement);
            }
        }

        function saveEarnedBadges() {
            localStorage.setItem('earnedBadgeIds', JSON.stringify(Array.from(earnedBadges)));
            localStorage.setItem('earnedBadgesData', JSON.stringify(stats.badgesEarned));
        }

        function loadEarnedBadges() {
            try {
                const storedIds = localStorage.getItem('earnedBadgeIds');
                const storedData = localStorage.getItem('earnedBadgesData');
                if (storedIds) {
                    earnedBadges = new Set(JSON.parse(storedIds));
                } else {
                     earnedBadges = new Set();
                }
                if (storedData) {
                    stats.badgesEarned = JSON.parse(storedData);
                } else {
                    stats.badgesEarned = [];
                }
            } catch (e) {
                earnedBadges = new Set();
                stats.badgesEarned = [];
            }
        }

        function showBadgeNotification(translatedBadgeData) {
            if (!badgeNotification || !badgeDescription) return;

            const titleEl = badgeNotification.querySelector('h3');
            const iconEl = badgeNotification.querySelector('.badge-icon');

            if(titleEl) titleEl.textContent = translatedBadgeData.name;
            if(iconEl) iconEl.textContent = translatedBadgeData.icon || 'üèÜ';
            badgeDescription.textContent = translatedBadgeData.description;

            badgeNotification.style.display = 'block';
            setTimeout(() => { if (badgeNotification) badgeNotification.style.display = 'none'; }, 4000);
        }

        function updateLanguageForElement(element) {
            element?.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                const translation = languages[currentLanguage]?.[key];
                if (translation !== undefined) {
                    if ((el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') && el.placeholder !== undefined) {
                        el.placeholder = translation;
                    }
                    if (el.tagName === 'LABEL' || el.tagName === 'BUTTON' || el.tagName === 'H3' || el.tagName === 'H4' || el.tagName === 'OPTION') {
                        const firstChild = el.firstChild;
                        if (firstChild && firstChild.nodeType === Node.TEXT_NODE) {
                            firstChild.textContent = translation;
                        } else if (el.childNodes.length > 0 && el.childNodes[0].nodeType === Node.TEXT_NODE) {
                             el.childNodes[0].textContent = translation;
                        } else {
                             el.textContent = translation;
                        }
                    }
                     if (el.title) el.title = translation;
                     if (el.ariaLabel) el.ariaLabel = translation;
                }
            });
        }

        function renumberTermHeaders() {
            const termInputDivs = termsInputContainer?.querySelectorAll('.term-inputs');
            termInputDivs?.forEach((div, index) => {
                const header = div.querySelector('.term-header');
                const deleteBtn = div.querySelector('.delete-term-btn');
                const newNumber = index + 1;
                const termText = languages[currentLanguage]?.['term-header'] || '–¢–µ—Ä–º–∏–Ω';
                if (header) header.textContent = `${termText} ${newNumber}`;
                if (deleteBtn) {
                    const deleteText = `${languages[currentLanguage]?.['delete-term'] || '–£–¥–∞–ª–∏—Ç—å –¢–µ—Ä–º–∏–Ω'} ${newNumber}`;
                    deleteBtn.setAttribute('aria-label', deleteText);
                    deleteBtn.setAttribute('title', deleteText);
                }
                div.querySelectorAll('input, textarea').forEach(input => {
                    const baseId = input.id.replace(/\d+$/, '');
                    input.id = `${baseId}${newNumber}`;
                    const label = div.querySelector(`label[for^="${baseId}"]`);
                    if (label) label.setAttribute('for', input.id);
                });
            });
            termInputCounter = termInputDivs?.length || 0;
        }

        function renumberProblemHeaders() {
            const problemInputDivs = problemsInputContainer?.querySelectorAll('.problem-inputs');
            problemInputDivs?.forEach((div, index) => {
                const header = div.querySelector('.problem-header');
                const deleteBtn = div.querySelector('.delete-problem-btn');
                const newNumber = index + 1;
                const problemText = languages[currentLanguage]?.['problem-header'] || '–ó–∞–¥–∞—á–∞';
                if (header) header.textContent = `${problemText} ${newNumber}`;
                if (deleteBtn) {
                     const deleteText = `${languages[currentLanguage]?.['delete-problem'] || '–£–¥–∞–ª–∏—Ç—å –ó–∞–¥–∞—á—É'} ${newNumber}`;
                    deleteBtn.setAttribute('aria-label', deleteText);
                    deleteBtn.setAttribute('title', deleteText);
                }
                 div.querySelectorAll('input, textarea').forEach(input => {
                     const baseId = input.id.replace(/\d+$/, '');
                     input.id = `${baseId}${newNumber}`;
                     const label = div.querySelector(`label[for^="${baseId}"]`);
                     if (label) label.setAttribute('for', input.id);
                 });
            });
            problemInputCounter = problemInputDivs?.length || 0;
        }

        function addTermInputFields() {
            if (!termsInputContainer) return;
            termInputCounter++;
            const div = document.createElement('div');
            div.classList.add('term-inputs');
            div.dataset.cardNumber = termInputCounter;
            const deleteText = `${languages[currentLanguage]?.['delete-term'] || '–£–¥–∞–ª–∏—Ç—å –¢–µ—Ä–º–∏–Ω'} ${termInputCounter}`;
            div.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <h4 class="term-header">${languages[currentLanguage]?.['term-header'] || '–¢–µ—Ä–º–∏–Ω'} ${termInputCounter}</h4>
                    <button type="button" class="delete-term-btn" aria-label="${deleteText}" title="${deleteText}">üóëÔ∏è</button>
                </div>
                <label for="termFrontTitle${termInputCounter}" data-lang-key="card-front-title-label">${languages[currentLanguage]?.['card-front-title-label'] || '–¢–µ–º–∞/–¢–µ—Ä–º–∏–Ω:'}</label>
                <input type="text" id="termFrontTitle${termInputCounter}" class="term-front-title">
                <label for="termFrontContent${termInputCounter}" data-lang-key="card-front-content-label">${languages[currentLanguage]?.['card-front-content-label'] || '–í–æ–ø—Ä–æ—Å/–û–ø–∏—Å–∞–Ω–∏–µ:'}</label>
                <textarea id="termFrontContent${termInputCounter}" class="term-front-content" required></textarea>
                <label for="termBackFormula${termInputCounter}" data-lang-key="card-back-formula-label">${languages[currentLanguage]?.['card-back-formula-label'] || '–§–æ—Ä–º—É–ª–∞:'}</label>
                <textarea id="termBackFormula${termInputCounter}" class="term-back-formula"></textarea>
                <label for="termBackUnits${termInputCounter}" data-lang-key="card-back-units-label">${languages[currentLanguage]?.['card-back-units-label'] || '–ï–¥. –∏–∑–º.:'}</label>
                <input type="text" id="termBackUnits${termInputCounter}" class="term-back-units">
                <label for="termBackVars${termInputCounter}" data-lang-key="card-back-vars-label">${languages[currentLanguage]?.['card-back-vars-label'] || '–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:'}</label>
                <textarea id="termBackVars${termInputCounter}" class="term-back-vars"></textarea>
                <label for="termBackContent${termInputCounter}" data-lang-key="card-back-content-label">${languages[currentLanguage]?.['card-back-content-label'] || '–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:'}</label>
                <textarea id="termBackContent${termInputCounter}" class="term-back-content"></textarea>
            `;
            termsInputContainer.appendChild(div);
            const deleteBtn = div.querySelector('.delete-term-btn');
            deleteBtn?.addEventListener('click', () => { div.remove(); renumberTermHeaders(); });
        }

        function addProblemInputFields() {
            if (!problemsInputContainer) return;
            problemInputCounter++;
            const div = document.createElement('div');
            div.classList.add('problem-inputs');
            div.dataset.cardNumber = problemInputCounter;
            const deleteText = `${languages[currentLanguage]?.['delete-problem'] || '–£–¥–∞–ª–∏—Ç—å –ó–∞–¥–∞—á—É'} ${problemInputCounter}`;
            div.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <h4 class="problem-header">${languages[currentLanguage]?.['problem-header'] || '–ó–∞–¥–∞—á–∞'} ${problemInputCounter}</h4>
                    <button type="button" class="delete-problem-btn" aria-label="${deleteText}" title="${deleteText}">üóëÔ∏è</button>
                </div>
                <label for="problemTitle${problemInputCounter}" data-lang-key="problem-title-label">${languages[currentLanguage]?.['problem-title-label'] || '–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:'}</label>
                <input type="text" id="problemTitle${problemInputCounter}" class="problem-title">
                <label for="problemContent${problemInputCounter}" data-lang-key="problem-content-label">${languages[currentLanguage]?.['problem-content-label'] || '–ó–∞–¥–∞—á–∞:'}</label>
                <textarea id="problemContent${problemInputCounter}" class="problem-content" required></textarea>
                <label for="problemAnswer${problemInputCounter}" data-lang-key="problem-answer-label">${languages[currentLanguage]?.['problem-answer-label'] || '–û—Ç–≤–µ—Ç (—á–∏—Å–ª–æ):'}</label>
                <input type="text" id="problemAnswer${problemInputCounter}" class="problem-answer" required placeholder="${languages[currentLanguage]?.['input-placeholder'] || '0'}">
            `;
            problemsInputContainer.appendChild(div);
            const deleteBtn = div.querySelector('.delete-problem-btn');
            deleteBtn?.addEventListener('click', () => { div.remove(); renumberProblemHeaders(); });
        }

        function toggleDeckTypeSections() {
            if (!deckTypeInput || !termsSection || !problemsSection) return;
            const selectedType = deckTypeInput.value;
            termsSection.style.display = (selectedType === 'terms' || selectedType === 'combined') ? 'block' : 'none';
            problemsSection.style.display = (selectedType === 'problems' || selectedType === 'combined') ? 'block' : 'none';
        }

        function toggleMusic() {
            if (!backgroundMusic) return;
            if (isMusicPlaying) {
                backgroundMusic.pause();
            } else {
                backgroundMusic.play();
            }
            isMusicPlaying = !isMusicPlaying;
        
            updateMusicButton();
        
            localStorage.setItem('musicPlaying', isMusicPlaying);
        }

        function setVolume(volume) {
            if (!backgroundMusic) return;
            musicVolume = parseFloat(volume);
            backgroundMusic.volume = musicVolume;
            localStorage.setItem('musicVolume', musicVolume);
        }

        function updateMusicButton() {
            if (!musicToggleBtn) return;

            let icon = 'üîá';

            if (isMusicPlaying) {
                if (musicVolume >= 0.5) {
                    icon = 'üîä';
                } else if (musicVolume > 0) {
                    icon = 'üîâ';
                }
            }
        
            musicToggleBtn.textContent = icon;
        
            const titleKey = isMusicPlaying ? 'pause-music' : 'play-music';
            musicToggleBtn.title = languages[currentLanguage]?.[titleKey] || (isMusicPlaying ? 'Pause' : 'Play');
        }

        function initializeMusic() {
            if (!backgroundMusic || !volumeSlider) return;

            const savedVolume = localStorage.getItem('musicVolume');
            musicVolume = (savedVolume !== null) ? parseFloat(savedVolume) : 0.3;

            volumeSlider.value = musicVolume;
            backgroundMusic.volume = musicVolume;

            const savedPlaying = localStorage.getItem('musicPlaying');
            isMusicPlaying = savedPlaying === 'true';

            updateMusicButton();
        }

        function createDeck(event) {
            event.preventDefault();
            if (!deckTitleInput || !deckTypeInput || !termsInputContainer || !problemsInputContainer) return;
            const deckTitle = deckTitleInput.value.trim();
            const deckDesc = deckDescInput?.value.trim() || '';
            const deckType = deckTypeInput.value;
            if (!deckTitle) {
                alert(languages[currentLanguage]?.['deck-title-required'] || '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.');
                return;
            }
            const collectedTermsCards = [];
            const collectedProblemsCards = [];
            if (deckType === 'terms' || deckType === 'combined') {
                termsInputContainer.querySelectorAll('.term-inputs').forEach((termDiv) => {
                    const frontTitle = termDiv.querySelector('.term-front-title')?.value.trim();
                    const frontContent = termDiv.querySelector('.term-front-content')?.value.trim();
                    const backFormula = termDiv.querySelector('.term-back-formula')?.value.trim();
                    const backUnits = termDiv.querySelector('.term-back-units')?.value.trim();
                    const backVars = termDiv.querySelector('.term-back-vars')?.value.trim();
                    const backContent = termDiv.querySelector('.term-back-content')?.value.trim();
                    if (frontContent) {
                        collectedTermsCards.push({ front: { title: frontTitle || '', content: frontContent }, back: { formula: backFormula || '', units: backUnits || '', vars: backVars || '', content: backContent || '' } });
                    }
                });
            }
            if (deckType === 'problems' || deckType === 'combined') {
                problemsInputContainer.querySelectorAll('.problem-inputs').forEach((problemDiv) => {
                    const title = problemDiv.querySelector('.problem-title')?.value.trim();
                    const content = problemDiv.querySelector('.problem-content')?.value.trim();
                    const answer = problemDiv.querySelector('.problem-answer')?.value.trim();
                    if (content && answer) {
                        collectedProblemsCards.push({ front: { title: title || '', content: content }, back: { content: answer } });
                    }
                });
            }
            if ((deckType === 'terms' && collectedTermsCards.length === 0) || (deckType === 'problems' && collectedProblemsCards.length === 0) || (deckType === 'combined' && collectedTermsCards.length === 0 && collectedProblemsCards.length === 0)) {
                alert(languages[currentLanguage]?.['add-one-card-alert'] || '–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–∞–ª–∏–¥–Ω—ã–π —Ç–µ—Ä–º–∏–Ω –∏–ª–∏ –∑–∞–¥–∞—á—É.');
                return;
            }
            const deckId = `custom-deck-${Date.now()}`;
            const newDeckData = { title: deckTitle, description: deckDesc, deckType: deckType };
            if (deckType === 'terms') newDeckData.cards = collectedTermsCards;
            else if (deckType === 'problems') newDeckData.cards = collectedProblemsCards;
            else { newDeckData.termsCards = collectedTermsCards; newDeckData.problemsCards = collectedProblemsCards; }
            customDecks[deckId] = newDeckData;
            saveCustomDecksToLocalStorage();
            combineAllDecks();
            populateDeckList();
            alert(`${languages[currentLanguage]?.['deck-created-success'] || '–ö–æ–ª–æ–¥–∞'} "${deckTitle}" ${languages[currentLanguage]?.['created-successfully'] || '—É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!'}`);
            if (createDeckModal) createDeckModal.style.display = 'none';
            loadDeck(deckId);
            createDeckForm.reset();
            termsInputContainer.innerHTML = ''; problemsInputContainer.innerHTML = '';
            termInputCounter = 0; problemInputCounter = 0;
            addTermInputFields(); addProblemInputFields();
            toggleDeckTypeSections();
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadEarnedBadges();
            initializeTheme();
            initializeLanguage();
            initializeDecks();

            chooseDeckBtn?.addEventListener('click', () => {
                if (deckModal) {
                    populateDeckList();
                    deckModal.style.display = 'flex';
                }
            });

            createDeckBtn?.addEventListener('click', () => {
                if (createDeckModal) {
                    createDeckModal.style.display = 'flex';
                }
            });

            achievementsBtn?.addEventListener('click', () => {
                if (achievementsModal) {
                    populateAchievementsList();
                    achievementsModal.style.display = 'flex';
                }
            });

            window.addEventListener('click', (e) => {
                if (e.target === deckModal) deckModal.style.display = 'none';
                if (e.target === createDeckModal) createDeckModal.style.display = 'none';
                if (e.target === achievementsModal) achievementsModal.style.display = 'none';
                if (e.target === aboutModal) aboutModal.style.display = 'none';
                if (languageMenu && languageToggle &&
                    !languageToggle.contains(e.target) &&
                    !languageMenu.contains(e.target)) {
                    languageMenu.style.display = 'none';
                }
            });

            themeToggle?.addEventListener('click', toggleTheme);

            languageToggle?.addEventListener('click', (e) => {
                e.stopPropagation();
                if(languageMenu) languageMenu.style.display = languageMenu.style.display === 'block' ? 'none' : 'block';
            });

            languageMenu?.addEventListener('click', (e) => {
                const langOption = e.target.closest('.language-option');
                if (langOption) {
                    const lang = langOption.dataset.lang;
                    if (lang && languages[lang]) { updateLanguage(lang); languageMenu.style.display = 'none'; }
                }
            });
            aboutBtn?.addEventListener('click', () => {
                if (aboutModal) {
                    updateLanguageForElement(aboutModal);
                    aboutModal.style.display = 'flex';
                }
            });
            resetAchievementsBtn?.addEventListener('click', resetAchievements);
            prevBtn?.addEventListener('click', prevCard);
            nextBtn?.addEventListener('click', nextCard);
            flipBtn?.addEventListener('click', flipCard);
            shuffleBtn?.addEventListener('click', toggleShuffle);
            modeCards.forEach(card => { card.addEventListener('click', () => { if (!card.classList.contains('disabled')) { const mode = card.dataset.mode; if(mode) switchMode(mode); } }); });
            submitProblemAnswerBtn?.addEventListener('click', checkProblemAnswer);
            problemAnswerInput?.addEventListener('keypress', (e) => { if (e.key === 'Enter') checkProblemAnswer(); });
            problemAnswerInput?.addEventListener('input', hideAnswerFeedback);
            resetStatsBtn?.addEventListener('click', resetStats);
            volumeSlider.oninput = () => {
                musicVolume = parseFloat(volumeSlider.value);
                backgroundMusic.volume = musicVolume;
                updateMusicButton();
            };
            createDeckForm?.addEventListener('submit', createDeck);
            deckTypeInput?.addEventListener('change', toggleDeckTypeSections);
            addAnotherTermBtn?.addEventListener('click', addTermInputFields);
            addAnotherProblemBtn?.addEventListener('click', addProblemInputFields);
            flashcardEl?.addEventListener('click', flipCard);
            musicToggleBtn?.addEventListener('click', toggleMusic);
            volumeSlider?.addEventListener('input', (e) => setVolume(e.target.value));
            const startMusicInteraction = () => {
                if (isMusicPlaying && backgroundMusic?.paused) {
                    backgroundMusic.play();
                }
                document.body.removeEventListener('click', startMusicInteraction);
                document.body.removeEventListener('keydown', startMusicInteraction);
            };
            document.body.addEventListener('click', startMusicInteraction, { once: true });
            document.body.addEventListener('keydown', startMusicInteraction, { once: true });
            initializeMusic();

        });
    </script>
</body>
</html>